"use strict";(self.webpackChunkSHEIN_W=self.webpackChunkSHEIN_W||[]).push([[24470],{412167:function(o,t,i){i.d(t,{f:function(){return y}});var n=i(744937),e=i(661733),l=i(423534),s=i(534523);const{percentNum:u,percentNumWithoutSign:r}=n.L,{DEBUG:a}=e.A,{NeedDealPromotionTypeIds:c,PriorityPromotionTypeIds:d,TitlePromotionTypeIds:m,IconPromotionTypeIds:_,BrandProductPromotionTypeIds:p}=e.A;class h{constructor({item:o=[],integrityPromotionInfo:t={},language:i={}}={}){this.rawModule=[],this.integrityPromotionInfo=t,this.content={},this.register({item:o,language:i})}register({item:o,language:t}){var i;const e=o.promotionInfo;this.rawModule=null!=e&&e.length?e.map((i=>{const e={},{typeId:l,id:s,buyLimit:u,soldNum:r,promotion_logo_type:a,promotionLogoType:c}=i,m=31!=+l||3===a||3===c;if(d.includes(+l)&&m){const l={p:i,language:t,options:{}};let a={};u&&!i.originBuyLimit&&(a.originBuyLimit=u),r&&!i.originSoldNum&&(a.originSoldNum=r),l.options=n.L.assignOptions({item:o,p:Object.assign(i,this.integrityPromotionInfo[s]||{},a)});const c=this.transformPromotionsContent(l);Object.assign(e,i,c,this.integrityPromotionInfo[s]||{})}return e.typeId=Number(l),e.sortIndex=d.indexOf(Number(l)),e})).sort(((o,t)=>o.sortIndex-t.sortIndex)):[],this.rawModule.length>1&&14==this.content.typeId&&"1"==(null===(i=this.integrityPromotionInfo[this.content.id])||void 0===i?void 0:i.isFullShop)&&(this.content=this.rawModule.find((o=>!(14==o.typeId&&"1"==o.isFullShop))))}transformPromotionsContent({p:o,language:t,options:i={}}={}){const{typeId:e,id:d,brandName:h="",mainProductRange:f}=o;var v,g;if(this.content.isVipItem=Boolean(12==e),this.content.isMoreDiscount=Boolean(i.isMoreDiscount),this.content.isLimitedItem=Boolean(i.isLimitedItem),Object.entries(m).some((([o,i])=>{if(i.includes(+e))return this.content.title=`${4==f&&p.includes(+e)?h:""} ${t[o]}`,!0})),Object.entries(_).some((([o,t])=>{if(t.includes(+e))return this.content.icon=o,!0})),[3,8].includes(+e))this.content.countDownSingle=(null===(v=this.integrityPromotionInfo[d])||void 0===v||null===(g=v.integrityContent)||void 0===g?void 0:g.countDown)||void 0;else if([10,11].includes(+e)){const{isCountdown:t,endTimestamp:i}=o;this.content.countDown="1"==t?n.L.countDownTime({endTimestamp:i}):""}else{var S,I;this.content.countDown=(null===(S=this.integrityPromotionInfo[d])||void 0===S||null===(I=S.integrityContent)||void 0===I?void 0:I.countDown)||void 0}if(c.includes(+e)){const c=function({language:o={},integrityPromotionInfo:t={},originPromotionInfo:i={},id:e="",typeId:c="",options:d={}}){const m={},_=Boolean(t[e]),p=Object.assign({},t[e]||{},i);let{rangeList:h=[],ruleCrondType:f="",ruleType:v="",buyLimit:g="",discountValue:S="",singleLimitType:I="",singleNum:P="",orderNum:y="",soldNum:b="",endTimestamp:E="",mainProductRange:C,brandName:w,rules:N}=p;const{lang:k}=gbCommonInfo;if(m.id=e,m.typeId=c,m.tips={text:"",list:[]},m.tip="",m.difference={text:"",diff:"",diffAmount:null,diffType:""},m.action=0,m.tipsIndex=0,m.lable="",m.rules=N||[],a&&n.L.logBrowser("integrityPromotionInfo",t[e]),1==c)_&&(m.tips.list[0]="sale_discount"==v?(0,l.v)(g,r(S),o.SHEIN_KEY_PC_18177):(0,l.v)(g,r(S),o.SHEIN_KEY_PC_18176),m.tips.text=m.tips.list[0]||""),m.lable=o.SHEIN_KEY_PC_16032;else if(2==c)_&&(m.tips.list[0]=4==C?(0,l.v)(g,w,o.SHEIN_KEY_PC_21328):(0,l.v)(g,o.SHEIN_KEY_PC_21327),m.tips.text=m.tips.list[0]||""),m.lable=4==C?(0,l.v)(w,o.SHEIN_KEY_PC_21336):o.SHEIN_KEY_PC_16033;else if(3==c)m.tips.text=d.isMoreDiscount?o.SHEIN_KEY_PC_18042:o.SHEIN_KEY_PC_15951;else if(4==c)m.lable=o.SHEIN_KEY_PC_16033;else if(8==c)m.lable=o.SHEIN_KEY_PC_18000;else if(9==c)h.length&&(h.forEach(((t,i)=>{var n;"sale_discount"==v?m.tips.list[i]=(0,l.v)(t.buyLimit.amount,(100*(1-t.discountValue.amount)).toFixed(0),o.SHEIN_KEY_PC_17083):["hk","tw"].includes(k)?m.tips.list[i]=(0,l.v)(t.buyLimit.amount,(10*t.discountValue.amount).toFixed(1),o.SHEIN_KEY_PC_14555):m.tips.list[i]=(0,l.v)(t.buyLimit.amount,(100*(1-t.discountValue.amount)).toFixed(0)+"%",null===(n=o.SHEIN_KEY_PC_14555)||void 0===n?void 0:n.replace("%",""))})),m.tips.text=m.tips.list[0]||""),m.lable=o.SHEIN_KEY_PC_16032;else if(10==c||11==c){if(Object.keys(i).length){const t=Date.now(),i={1:(0,l.v)(P,o.SHEIN_KEY_PC_17383),2:"",3:(0,l.v)(P,o.SHEIN_KEY_PC_17383)}[I]||"";m.tips.list[0]=Number(g)>Number(b)&&t<Number(E)?i:"",m.tips.text=m.tips.list[0]||""}}else if(13==c)h.length&&(h.forEach(((t,i)=>{const n=t.ruleDimension,e=t.buyLimit.amountWithSymbol,u=t.buyLimit.amount,a=t.redemption[0].price.amountWithSymbol,c=t.redemption[0].price.amount;"quantity"==v?"price"==n?m.tips.list[i]=(0,l.v)(u,a,(0,s.C)({text:o.SHEIN_KEY_PC_17204})):"discount"==t.ruleDimension&&(m.tips.list[i]=(0,l.v)(u,r(c),(0,s.C)({text:o.SHEIN_KEY_PC_17202}))):"price"==t.ruleDimension?m.tips.list[i]=(0,l.v)(e,a,(0,s.C)({text:o.SHEIN_KEY_PC_17205})):"discount"==t.ruleDimension&&(m.tips.list[i]=(0,l.v)(e,r(c),(0,s.C)({text:o.SHEIN_KEY_PC_17203})))})),m.tips.text=m.tips.list[0]||""),m.lable=o.SHEIN_KEY_PC_15966;else if(14==c)m.lable=o.SHEIN_KEY_PC_16032,m.rules.length&&m.rules.forEach(((t,i)=>{var n;let{type:e,value:s,value_amount:u,discount:r}=t||{},a=null==r||null===(n=r.value_amount)||void 0===n?void 0:n.amountWithSymbol,c=null==u?void 0:u.amountWithSymbol,d={1:(0,l.v)(a,s,o.SHEIN_KEY_PC_17542),2:(0,l.v)(s,a,o.SHEIN_KEY_PC_29568),3:(0,l.v)(a,c,o.SHEIN_KEY_PC_17541),4:(0,l.v)(c,a,o.SHEIN_KEY_PC_29567)};d[e]&&(m.tips.list[i]=d[e])})),h.length&&(m.tips.text=m.tips.list[0]||"",N.find((o=>4==o.type))?m.lable=(0,l.v)(h[0].buyLimit.amountWithSymbol,h[0].discountValue.amountWithSymbol,o.SHEIN_KEY_PC_29567):N.find((o=>2==o.type))?m.lable=(0,l.v)(h[0].buyLimit.amount,h[0].discountValue.amountWithSymbol,o.SHEIN_KEY_PC_29568):m.lable=1==f?(0,l.v)(h[0].discountValue.amountWithSymbol,h[0].buyLimit.amountWithSymbol,o.SHEIN_KEY_PC_17541):(0,l.v)(h[0].discountValue.amountWithSymbol,h[0].buyLimit.amount,o.SHEIN_KEY_PC_17542));else if(15==c)m.lable=o.SHEIN_KEY_PC_16032,h.length&&(h.forEach(((t,i)=>{const n=t.discountValue.amountWithSymbol,e=t.buyLimit.amount;1==f?m.tips.list[i]=(0,l.v)(n,e,o.SHEIN_KEY_PC_15975):2==f&&(m.tips.list[i]=(0,l.v)(n,e,o.SHEIN_KEY_PC_15976))})),m.tips.text=m.tips.list[0]||"",m.lable=(0,l.v)(h[0].discountValue.amountWithSymbol,h[0].buyLimit.amount,o.SHEIN_KEY_PC_17543));else if(16==c)h.length&&(2==h.length?m.tips.list[0]=(0,l.v)(h[0].discount.amountWithSymbol,h[1].discount.amountWithSymbol,o.SHEIN_KEY_PC_16156):1==h.length&&(m.tips.list[0]=(0,l.v)(h[0].discount.amountWithSymbol,o.SHEIN_KEY_PC_16154)),m.tips.text=m.tips.list[0]||""),m.lable=o.SHEIN_KEY_PC_16032;else if(17==c)h.length&&(2==h.length?m.tips.list[0]=(0,l.v)(u((100-100*h[0].discount.amount).toFixed(0)),u((100-100*h[1].discount.amount).toFixed(0)),o.SHEIN_KEY_PC_16155):1==h.length&&(m.tips.list[0]=(0,l.v)(u((100-100*h[0].discount.amount).toFixed(0)),o.SHEIN_KEY_PC_16153)),m.tips.text=m.tips.list[0]||""),m.lable=o.SHEIN_KEY_PC_16032;else if(18==c)h.length&&(2==h.length?m.tips.list[0]=(0,l.v)(h[0].discount.amountWithSymbol,h[1].discount.amountWithSymbol,o.SHEIN_KEY_PC_16156):1==h.length&&(m.tips.list[0]=(0,l.v)(h[0].discount.amountWithSymbol,o.SHEIN_KEY_PC_16154)),m.tips.text=m.tips.list[0]||""),m.lable=o.SHEIN_KEY_PC_16032;else if(19==c)h.length&&("sale_discount"==v?2==h.length?m.tips.list[0]=(0,l.v)(r(h[0].discount.amount),r(h[1].discount.amount),o.SHEIN_KEY_PC_17085):1==h.length&&(m.tips.list[0]=(0,l.v)(r(h[0].discount.amount),o.SHEIN_KEY_PC_17084)):2==h.length?m.tips.list[0]=(0,l.v)(u(h[0].discount.amount),u(h[1].discount.amount),o.SHEIN_KEY_PC_16155):1==h.length&&(m.tips.list[0]=(0,l.v)(u(h[0].discount.amount),o.SHEIN_KEY_PC_16153)),m.tips.text=m.tips.list[0]||""),m.lable=o.SHEIN_KEY_PC_16032;else if(20==c)h.length&&(h.forEach(((t,i)=>{const n=t.coupon,e=t.buyLimit.amountWithSymbol,u=n.priceSymbol;"0"!=n.isFreeShipCoupon||"0"!=n.isMemberFreeShipCoupon?m.tips.list[i]=(0,l.v)(e,(0,s.C)({text:o.SHEIN_KEY_PC_16152})):(n.couponTypeId,m.tips.list[i]=(0,l.v)(e,u,(0,s.C)({text:o.SHEIN_KEY_PC_16150})))})),m.tips.text=m.tips.list[0]||""),m.lable=o.SHEIN_KEY_PC_16035;else if(24==c){if(_){P=Number(P),y=Number(y);const t={sale_discount:()=>`${o.SHEIN_KEY_PC_17488}${P?(0,l.v)(Number(P),o.SHEIN_KEY_PC_17489):""}${y?(0,l.v)(Number(y),o.SHEIN_KEY_PC_17493):""}`,no_discount:()=>`${P&&y?(0,l.v)(Number(P),o.SHEIN_KEY_PC_17489):P?(0,l.v)(Number(P),o.SHEIN_KEY_PC_17495):""}${y?(0,l.v)(Number(y),o.SHEIN_KEY_PC_17496):""}`},i="no_discount"==v?"no_discount":"sale_discount";m.tips.list[0]=t[i]()||"",m.tips.text=m.tips.list[0]||"",m.tip=m.tips.text+m.difference.text,m.tipsIndex=0,m.lable="no_discount"==v?"":o.SHEIN_KEY_PC_17484}}else 25==c?(h.length&&(h.forEach(((t,i)=>{m.tips.list[i]="sale_discount"==v?(0,l.v)(t.buyLimit.amountWithSymbol,u(t.discountValue.amount),o.SHEIN_KEY_PC_17835):(0,l.v)(t.buyLimit.amountWithSymbol,u(t.discountValue.amount),o.SHEIN_KEY_PC_17836)})),m.tips.text=m.tips.list[0]||""),m.lable=o.SHEIN_KEY_PC_16032):28==c&&(h.forEach(((t,i)=>{m.tips.list[i]=4==C?(0,l.v)(w,t.buyLimit.amountWithSymbol,o.SHEIN_KEY_PC_21326):(0,l.v)(t.buyLimit.amountWithSymbol,o.SHEIN_KEY_PC_21325)})),m.lable=4==C?(0,l.v)(w,o.SHEIN_KEY_PC_21336):o.SHEIN_KEY_PC_16033,m.tips.text=m.tips.list[0]||"");return m}({id:d,typeId:e,language:t,integrityPromotionInfo:this.integrityPromotionInfo,options:i,originPromotionInfo:o});this.content=Object.assign(this.content,c)}return Object.assign({},this.content)}}var f=i(779726),v=i(607748),g=i(592524);const{NeedFetchPromotionTypeIds:S,FetchPromotionLableTypeIds:I}=e.A;class P{constructor(){this.cache={integrityPromotionInfo:{}},this.language={}}async assignItems({items:o=[],language:t=this.language||{},isGetLable:i=!1,isGetVipPrice:n=!1,isGetSheinClubPrice:e=!1,isAppPromotion:l=!1,isGetNewFlashPromotion:s=!1,caller:u=""}={}){Object.keys(t).length||(this.language=t=await f.A.loadByQueue("promotion"));const r=[].concat(o),a=[],c=i?I:S,d=[],m=[];let _=!1,p=!1,v=!1;r.forEach((o=>{o.promotionInfo&&o.promotionInfo.forEach((t=>{const{id:i,typeId:l,flash_type:u,flashType:r}=t,h=u||r;c.includes(+l)&&!a.includes(i)&&a.push(i);const{goods_id:f,goods_sn:g,mall_code:S}=o,I={goods_id:f,goods_sn:g,mall_code:S};n&&12==l?(_=!0,I.promotionId=i,d.push(I)):e&&29==l?(p=!0,I.promotionId=i,d.push(I)):s&&10==l&&[2,3,4].includes(h&&Number(h))&&(v=!0,I.promotionId=i,m.push(I))})),l&&o.appPromotion&&(o.promotionInfo=o.promotionInfo.concat(o.appPromotion))}));const[g,P]=await Promise.all([this.getVipPrice({goodsParams:d,vipDiscountPrices:_,sheinClubPromotionInfo:p,caller:u}),this.getNewFlashPromotion({flashPromotionParams:m,newFlashPromotion:v,caller:u})]);let y=await this.setIntegrityPromotionInfo({ids:a});return y=Object.assign({},y,{}),r.forEach((o=>{var i,n;o.promotionModule=new h({item:o,integrityPromotionInfo:y,language:t});const e=(null==g?void 0:g[o.goods_id])||{},l=o.exclusivePromotionPrice||(null==e?void 0:e.exclusivePromotionPrice),s=o.sheinClubPromotionInfo||(null==e?void 0:e.sheinClubPromotionInfo),u=o.newFlashPromotion||(null==P||null===(i=P[o.goods_id])||void 0===i?void 0:i.newFlashPromotion)||(null==P||null===(n=P[o.goods_id])||void 0===n?void 0:n.flashZonePromotion);l&&(o.vipPrice=l),s&&(o.sheinClubPromotionInfo=s),u&&(o.newFlashPromotion=u)})),{integrityPromotionInfo:y,vipPriceList:g,items:r}}assignItemsSync({items:o=[],language:t=this.language||{},isGetLable:i=!1,isGetVipPrice:n=!1,isGetSheinClubPrice:e=!1,isAppPromotion:l=!1,isGetNewFlashPromotion:s=!1,promotionInfoFromServer:u={}}={}){const r=[].concat(o),a=[],c=i?I:S;r.forEach((o=>{o.promotionInfo&&o.promotionInfo.forEach((t=>{const{id:i,typeId:l,flash_type:u,flashType:r}=t,d=u||r;c.includes(+l)&&!a.includes(i)&&a.push(i);const{goods_id:m,goods_sn:_,mall_code:p}=o,h={goods_id:m,goods_sn:_,mall_code:p};(n&&12==l||e&&29==l||s&&10==l&&[2,3].includes(d&&Number(d)))&&(h.promotionId=i)})),l&&Array.isArray(o.promotionInfo)&&o.appPromotion&&(o.promotionInfo=o.promotionInfo.concat(o.appPromotion))})),this.setCacheIntegrityPromotionInfo(u,t);let d={};for(const o of a)d[o]=this.cache.integrityPromotionInfo[o];return d=Object.assign({},d,{}),r.forEach((o=>{var i,n,e;o.promotionModule=new h({item:o,integrityPromotionInfo:d,language:t});let l=null,s=null,u=null;null!==(i=Object.keys(o.exclusivePromotionPrice||{}))&&void 0!==i&&i.length&&(l=o.exclusivePromotionPrice),null!==(n=Object.keys(o.sheinClubPromotionInfo||{}))&&void 0!==n&&n.length&&(s=o.sheinClubPromotionInfo),null!==(e=Object.keys(o.newFlashPromotion||{}))&&void 0!==e&&e.length&&(u=o.newFlashPromotion),l&&(o.vipPrice=l),s&&(o.sheinClubPromotionInfo=s),u&&(o.newFlashPromotion=u)})),{integrityPromotionInfo:d,vipPriceList:void 0,items:r}}setIntegrityPromotionInfo({ids:o=[]}={}){const t=[],i={};return o&&o.length&&o.forEach((o=>{void 0===this.cache.integrityPromotionInfo[o]?(i[o]={},t.push(o)):i[o]=this.cache.integrityPromotionInfo[o]})),t.length?(0,g.A)({url:"/api/cart/getIntegrityPromotionInfo/get",method:"POST",data:{ids:o}}).then((o=>("0"==o.code&&o.info&&o.info.length>0&&o.info.forEach((o=>{this.dealIntegrityPromotionInfo(o),i[o.id]=this.cache.integrityPromotionInfo[o.id]=o})),i))).catch((()=>i)):Promise.resolve(i)}dealIntegrityPromotionInfo(o){const t={},{isCountdown:i,endTimestamp:e}=o;"1"==i&&e&&(t.countDown=n.L.countDownTime({endTimestamp:e}),t.countDownTimeStamp=1e3*e),o.integrityContent=t}async getVipPrice({goodsParams:o=[],vipDiscountPrices:t,sheinClubPromotionInfo:i,caller:n=""}){return null!=o&&o.length&&(t||i)?await v.A.getAtomicInfo({goods:o,fields:{vipDiscountPrices:t,sheinClubPromotionInfo:i},needAssign:!1,...n?{caller:n}:{}}):{}}async getNewFlashPromotion({flashPromotionParams:o,newFlashPromotion:t,caller:i}){return null!=o&&o.length&&t?await v.A.getAtomicInfo({goods:o,fields:{newFlashPromotion:t,flashZonePromotion:1},needAssign:!1,caller:i}):{}}setCacheIntegrityPromotionInfo(o={},t={}){Object.keys(t).length&&(this.language=t),"0"==o.code&&o.info&&o.info.length>0&&o.info.forEach((o=>{this.dealIntegrityPromotionInfo(o),this.cache.integrityPromotionInfo[o.id]=o}))}}const y="undefined"!=typeof window?window.promotionCenter=window.promotionCenter||new P:new P},450649:function(o,t,i){i.d(t,{AI:function(){return y},G6:function(){return O},Gt:function(){return F},Hp:function(){return v},MT:function(){return j},Mg:function(){return K},Mh:function(){return k},Oi:function(){return S},V4:function(){return w},Xj:function(){return T},_3:function(){return E},ai:function(){return W},bp:function(){return g},fx:function(){return Y},go:function(){return B},hK:function(){return H},jL:function(){return R},jY:function(){return I},k_:function(){return M},lc:function(){return D},uC:function(){return V},w9:function(){return N},y8:function(){return b},yL:function(){return A}});var n=i(649694),e=i(607748),l=i(920156),s=i(118300),u=i(91206),r=i(592524),a=i(493559),c=i(347732),d=i(423534),m=i(534523),_=i(26091),p=i(22299),h=i(740955),f=i(542520);const v=(o={})=>{var t;const{sale_attr_list:i={},mainSaleAttr:n={},relatedColor:e=[],goods_id:l,promotion_group:s}=o,u=String(l),{skc_sale_attr:r=[]}=i,a=n.main_attribute_value_name||"";let d="";if(2===n.main_sale_attr_show_mode&&e.length){const o=e.find((o=>String(o.goods_id)===u))||{};o.goods_img&&(d=(0,c.Y)({img:o.goods_color_image}))}const m=1===r.length&&1===(null===(t=r[0].attr_value_list)||void 0===t?void 0:t.length),_=!r.length,p=_&&e.length>1,h=r.length>1,f=r.map((o=>{var t,i;return null===(t=o.attr_name)||void 0===t||null===(i=t.trim)||void 0===i?void 0:i.call(t)})).filter((o=>o)).join("/"),v=0==o.stock||0==o.is_on_sale,g="1"==s,S=!(e.length>1)&&v;return{...o,_cartInfo:{isMainGoods:!1,isSoldOut:v,isOnlySkuSoldOut:!1,isSpuSoldOut:S,isOneSku:m,isNotSku:_,isOnlySkc:p,isMultiAttrs:h,selectStatus:!1,_selectStatusOutSide:!1,warnStatus:!1,skuCode:"",mainAttrName:a,mainAttrImg:d,skuName:"",skuTypeName:f,isPromotionGroup:g,selectedAttrIndex:{}}}},g=(o=[])=>{if(!o.length)return[];const t=o.map(v);return t[0]._cartInfo.isMainGoods=!0,t},S=async({list:o,onlySkc:t})=>{const i={params:(o||[]).map((o=>{var i;return{mall_code:o.mall_code,goods_id:o.goods_id,skc:o.skc,sku:t?void 0:(null==o||null===(i=o._cartInfo)||void 0===i?void 0:i.skuCode)||void 0}}))},n=await(0,r.A)({url:"/api/productInfo/getBundlePrice/get",method:"POST",data:i});return(null==n?void 0:n.info)||{}},I=(o={},t={},i={})=>{const{isPaidUser:n,isHitComplianceMode:e}=i,l=n?1:0,{bundleCouponPrices:s=[],bundleDisplayPrices:u=[],bundleDiscountPrice:r={},bundleRetailPrice:c={},bundleSalePrice:d={},bundleAbDiscountPrice:m={},bundleDiscountPriceWithoutAb:_={},unit_discount:p=0}=o,h={amountWithSymbol:"0.00",discount:0,discountAmountWithSymbol:"",retailAmountWithSymbol:(null==c?void 0:c.amountWithSymbol)||"",optimalCoupon:null,couponList:[],activityAmountWithSymbol:"",couponEndDate:0};if(0===Object.keys(o).length)return h;const f=s.filter((o=>o.is_vip_promotion==l))||[],v=f.concat([]).sort(((o,t)=>{var i,n;return Number(null===(i=t.coupon_discount_price)||void 0===i?void 0:i.amount)-Number(null===(n=o.coupon_discount_price)||void 0===n?void 0:n.amount)}))||[],g=null==v?void 0:v[0],S=u.find((o=>o.isVipPromotion==l));if(g&&!e){var I,b,E;h.couponList=null==f?void 0:f.map((o=>{var i;const n=(0,a.f7)({...o,rule:[o.rule]});return P({item:n,language:t,discountAmountWithSymbol:null===(i=o.coupon_discount_value)||void 0===i?void 0:i.amountWithSymbol})})),h.optimalCoupon=v[0],h.amountWithSymbol=null==g||null===(I=g.after_coupon_price)||void 0===I?void 0:I.amountWithSymbol,h.discount=g.coupon_discount,h.discountAmountWithSymbol=g.coupon_discount_price.amountWithSymbol,h.activityAmountWithSymbol=!y(null==S||null===(b=S.bundleShowDiscountPriceWithoutAb)||void 0===b?void 0:b.amount)&&(null==S||null===(E=S.bundleShowDiscountPriceWithoutAb)||void 0===E?void 0:E.amountWithSymbol)||!y(null==_?void 0:_.amount)&&(null==_?void 0:_.amountWithSymbol);const o=h.couponList.map((o=>o.end_date)).sort(((o,t)=>o-t)).filter((o=>o));h.couponEndDate=o[0]}else if(S){var C,w,N,k;h.amountWithSymbol=null==S||null===(C=S.bundleShowPrice)||void 0===C?void 0:C.amountWithSymbol,h.discount=S.unit_discount,h.discountAmountWithSymbol=!y(null===(w=S.bundleShowDiscountPrice)||void 0===w?void 0:w.amount)&&(null===(N=S.bundleShowDiscountPrice)||void 0===N?void 0:N.amountWithSymbol)||"",h.activityAmountWithSymbol=!y(null===(k=S.bundleShowDiscountPriceWithoutAb)||void 0===k?void 0:k.amount)&&S.bundleShowDiscountPriceWithoutAb.amountWithSymbol||""}else h.amountWithSymbol=d.amountWithSymbol,h.discount=p,h.discountAmountWithSymbol=!y(null==r?void 0:r.amount)&&r.amountWithSymbol,h.activityAmountWithSymbol=!y(null==_?void 0:_.amount)&&_.amountWithSymbol;if(!y(null==m?void 0:m.amount)){const o={_couponName:G(m.amountWithSymbol,t),_discountAmountWithSymbol:m.amountWithSymbol};h.couponList.unshift(o)}return h},P=(o={})=>{const{item:t,language:i={},abtEstimated:n=!1,discountAmountWithSymbol:e=""}=o,{coupon_rule:l,apply_for:s,real_type_id:u,shipping_discount_type:r,coupon_type_id:a}=t,c=(null==l?void 0:l[0])||{},_=101==s?G(c.value_amount.amountWithSymbol,i):"53"!=u&&"55"!=u||0!=r?["5","6"].includes(s)?i.SHEIN_KEY_PC_15911:"1"==a?`- ${c.value.amountWithSymbol}`:(0,d.v)(100*c.value.amount/100+"%","53"==u?"{0}":(0,m.C)({text:c.coupon_gift_id?i.SHEIN_KEY_PC_18189:i.SHEIN_KEY_PC_15957})):i.SHEIN_KEY_PC_15911;let p="";const{min:h,max:f}=null!=c?c:{};return f&&f.amountWithSymbol?p=(0,d.v)(h.amountWithSymbol,f.amountWithSymbol,(0,m.C)({text:i.SHEIN_KEY_PC_19368})):(null==h?void 0:h.amount)>0?p=(0,d.v)(h.amountWithSymbol,(0,m.C)({text:i[n?"SHEIN_KEY_PC_26542":"SHEIN_KEY_PC_15958"]})):0===Number(null==h?void 0:h.amount)&&101!==s&&(p=i.SHEIN_KEY_PC_27865||""),{...t,_couponName:`${_} ${p}`,_discountAmountWithSymbol:e}};function y(o){return!o||"0.00"===o||0===Number(o)}const b=(o={})=>{var t;const{getEstimatedInfo:i,language:n,retailAmountWithSymbol:e,activityAmountWithSymbol:l}=o,s=null==i||null===(t=i.value)||void 0===t?void 0:t.amountWithSymbol;try{var u;const{value:o={},discountPercentForBelt:t,discountValueForBelt:r,optimalCoupon:c,optimalCouponList:d=[]}=i,m=[];d.forEach((o=>{var t,i,e;if(!o.rule||"object"!=typeof o.rule)return;const l=Array.isArray(o.rule)&&o.rule||[o.rule],s=(0,a.f7)({...o,rule:l}),u=101==o.apply_for?null===(t=l[0])||void 0===t||null===(i=t.value_amount)||void 0===i?void 0:i.amountWithSymbol:null==o||null===(e=o.coupon_discount_value)||void 0===e?void 0:e.amountWithSymbol,r=P({item:s,language:n,abtEstimated:!0,discountAmountWithSymbol:u});r&&m.push(r)}));const _=Array.isArray(c)&&c[0]||c||{},p=101==(null==_?void 0:_.apply_for)?m[0]:null==m?void 0:m.find((o=>o.coupon===(null==_?void 0:_.coupon_code))),h=m.map((o=>o.end_date)).sort(((o,t)=>o-t)).filter((o=>o))[0]||0,f=t&&(null===(u=t.match(/^(\d+(?:\.\d+)?)%/))||void 0===u?void 0:u[1])||0;return{_hasEstimatedPrice:s,_isMainGoodsPrice:!0,amountWithSymbol:o.amountWithSymbol,discount:f,discountAmountWithSymbol:(null==r?void 0:r.amountWithSymbol)||"",retailAmountWithSymbol:e,optimalCoupon:p,couponList:m,activityAmountWithSymbol:l,couponEndDate:h}}catch(o){return{amount:0,amountWithSymbol:0,discount:0,retailAmout:0,retailAmountWithSymbol:0,discountAmountWithSymbol:"",optimalCoupon:null,couponList:[]}}},E=async(o={})=>{const{itemConfig:t={},subPageKey:i="",recPosKey:e,extednsConfig:l={}}=o,s=await(0,u.r3)(),r={};var a;e&&(r.location=e,r.jsonRuleId=JSON.stringify((null==s||null===(a=s[e])||void 0===a?void 0:a.param)||{}));const c=["mallInfo","prices","stock","vipDiscountPrices","baseInfo","locateLabels","saleAttrList","relatedProducts","mainSaleAttr","cccTspBadges","plusSize","seriesAndBrand","rankingList","beltLabel","userBehaviorLabel","userCommentKeywordsLabel","sellingPoints","sheinClubPromotionInfo","newFlashPromotion","quickShip","promotion","serviceLabel","labelsBeforeGoodsName","estimatedPrice","priceDiscountDesc","abPrice","cornerPropertyUpsell","estimatedPrice","horseRaceLabel",...null!=l&&l.hideSalesLabel?[]:["salesLabel"]],d={...(0,n.C)(t,c,!0),realTimeTspLabels:{label_cloud:["600020741"],machine_label:["3120"]},detailImage:!0,...await(0,h.i2)()||{}};return{...await(0,h.$n)({newProductCard:!0,isPaidUser:t._isPaidUser}),atomFields:d,atomScene:{pageKey:"page_goods_detail_rec",subPageKey:i}}},C={1:["other_recommend_1pic","ONE_IN_A_ROW"],3:["multiImageCommon",void 0]},w=async(o={})=>{const{goods:t,itemConfig:i,extednsConfig:n={},rows:u=1}=o,[r,a]=C[u]||[];let c=!1;const d=t.map((o=>{var t;const i=(null==o||null===(t=o._cartInfo)||void 0===t?void 0:t.skuCode)||void 0;return!c&&i&&(c=!0),{goods_id:o.goods_id,cat_id:o.cat_id,mall_code:o.mall_code,goods_sn:o.goods_sn,sku_code:i}})),{mallInfoForSite:m=[]}=await(0,l.c)(),{atomFields:_,abtInfoV3:p,atomCccParams:h,...f}=await E({itemConfig:i,extednsConfig:n,subPageKey:r});!c||null!=_&&_.skuPrices||(_.skuPrices=!0);const v={fields:_,abtInfo:p,...f,cccParams:h,pageKey:"page_goods_detail_rec",subPageKey:r,sceneKey:a,goods:d,mallInfo:m};return await e.A.getAtomicInfoNew(v),await(0,s.F)({products:d,itemConfig:i}),d},N=(o,t={},i)=>{if(!o)return;const{sale_attr_list:n={},_cartInfo:e={}}=t,{sku_list:l=[]}=n,s=l.find((t=>t.sku_code===o));if(!s)return;const{sku_sale_attr:u=[]}=s;let r="";const a={};if(!e.isNotSku&&u.length){const o=[];u.forEach((t=>{var i,n;a[t.attr_id]={attr_value_id:t.attr_value_id};const e=null===(i=t.attr_value_name)||void 0===i||null===(n=i.trim)||void 0===n?void 0:n.call(i);e&&o.push(e)})),o.length&&(r=o.join("/"))}return!0===k(o,t)||e.isSoldOut&&!e.isOnlySkuSoldOut?t._cartInfo.isOnlySkuSoldOut&&(t.is_on_sale="1",t.pretreatInfo.saleout={show:!1,message:""},t._cartInfo.isSoldOut=t._cartInfo.isOnlySkuSoldOut=!1):(t._cartInfo.isSoldOut=t._cartInfo.isOnlySkuSoldOut=!0,t.is_on_sale="0",t.pretreatInfo&&(t.pretreatInfo.saleout={show:!0,message:i}),t._cartInfo.selectStatus&&(t._cartInfo.selectStatus=!1)),t._cartInfo.skuCode=o,t._cartInfo.skuName=r,t._cartInfo.selectedAttrIndex=a,t},k=(o,t={})=>{const{mall_code:i,sale_attr_list:n={}}=t,e=n.sku_list.find((t=>t.sku_code===o));if(e)return e.mall_stock.some((o=>o.mall_code==i&&o.stock>0))},K=(o=[],t=!1,i)=>o.length?(o.forEach((o=>{if(t&&o._cartInfo.isMainGoods)return;if(o._cartInfo.isSoldOut)return;const n=L(o);n&&N(n,o,i)})),o):[],L=(o={})=>{const{sale_attr_list:t={},mall_code:i,_cartInfo:n={}}=o,{sku_list:e=[]}=t;if(n.isNotSku){var l,s;const o=e[0];if(!o)return;const t=null===(l=o.mall_stock)||void 0===l||null===(s=l.find)||void 0===s?void 0:s.call(l,(o=>o.mall_code===i));return(null==t?void 0:t.stock)>0?o.sku_code:void 0}{const o=[];for(let t=0;t<e.length;t++){var u;const n=e[t],l=null===(u=n.mall_stock)||void 0===u?void 0:u.find((o=>o.mall_code===i));if((null==l?void 0:l.stock)>0&&o.push(n),o.length>1)return}if(1!==o.length)return;return o[0].sku_code}};async function A(o,t,i){try{var n,e,l,s;if(!(0,p.isLogin)())return;const u=(null==o||null===(n=o.filter)||void 0===n?void 0:n.call(o,(o=>1!=o.coupon_status)).map((o=>o.coupon)))||[];if(!u.length)return;const a=await(0,r.A)({method:"POST",url:"/api/productInfo/bindCoupon/post",data:{coupon_codes:u}});return!(!a||0!=a.code||null===(e=a.info)||void 0===e||null===(l=e.successList)||void 0===l||null===(s=l.find)||void 0===s||!s.call(l,(o=>u.includes(o.couponCode)))||(t&&i&&i(),0))}catch(o){return!1}}const H=(o={})=>{const{list:t=[]}=o,i={ok:!1,isSoldOut:!1,isNoSku:!1,errList:[]};return t.forEach((o=>{if(o._cartInfo.selectStatus)return o._cartInfo.skuCode?o._cartInfo.isSoldOut?(i.isSoldOut=!0,void i.errList.push(o)):void 0:(i.isNoSku=!0,void i.errList.push(o))})),i.ok=0===i.errList.length,i},Y=async(o=[])=>{const t=o.map((o=>({mall_code:o.mall_code,sku_code:o._cartInfo.skuCode,quantity:1}))).filter((o=>o.sku_code));if(!t.length)return;const i={product_list:t};return await(0,r.A)({url:"/api/cart/batch_add_mall/create",method:"POST",data:i})},W=async(o={},t)=>{var i,n,e,l,s,u,a;const c=o.sale_attr_list,m=null==c||null===(i=c.sku_list)||void 0===i?void 0:i[0],_={goods_id:null==o?void 0:o.goods_id,mall_code:null==o?void 0:o.mall_code,sku_code:(null==m?void 0:m.sku_code)||"",quantity:1},p=await(0,r.A)({url:"/api/cart/add_mall/create",method:"POST",data:_});if(0!=(null==p?void 0:p.code)){let o="";const{code:i}=p||{};switch(+i){case 300405:{var h,v;const i=(null===(h=p.info)||void 0===h?void 0:h.limitCount)||(null===(v=p.info)||void 0===v?void 0:v.resultLimit);o=i?(0,d.v)(i,t.SHEIN_KEY_PC_14594):t.SHEIN_KEY_PC_17492}break;case 200401:case 500301:o=t.SHEIN_KEY_PC_14661;break;case 300402:o=t.SHEIN_KEY_PC_15071;break;case 300407:default:o=p.tips;break;case 500303:o=(0,d.v)((null===(n=p.info)||void 0===n?void 0:n.limitCount)||"",(null===(e=p.info)||void 0===e?void 0:e.resultLimit)||0,(null===(l=p.info)||void 0===l?void 0:l.remainNum)||0,p.tips);break;case 500306:case 500302:case 300417:o=(0,d.v)((null===(s=p.info)||void 0===s?void 0:s.limitCount)||"",(null===(u=p.info)||void 0===u?void 0:u.resultLimit)||0,(null===(a=p.info)||void 0===a?void 0:a.remainNum)||0,p.tips);break;case 500304:case 500305:o=t.SHEIN_KEY_PC_17492}(0,f.L)({message:o,type:"error",offset:180})}return p},O=(o={})=>{const{from:t="togetherbuy",list:i=[],result:n,location:e="popup",result_reason:l,tspABTest:s="",series_no:u=""}=o,r=`${(0,_.R)("cookieId")||""}${Date.now()}`;i.length?i.forEach((o=>{x({from:t,result:n,item:o,click_id:r,location:e,result_reason:l,tspABTest:s,series_no:u})})):x({from:t,result:n,item:{},click_id:r,location:e,result_reason:l,tspABTest:s,series_no:u})},x=({from:o,result:t,item:i={},click_id:n,location:e,result_reason:l,tspABTest:s="",series_no:u=""})=>{var r,a,c;const d={code:"goodsDetail",result:t,postData:{goods_id:i.goods_id||"",sku:i.goods_sn||"",spu:i.productRelationID||"",sku_code:(null==i||null===(r=i._cartInfo)||void 0===r?void 0:r.skuCode)||"",mallCode:i.mall_code||"",location:e,click_id:n,series_no:u,quickShip:i.quickship||""},from:o,review_location:"",traceid:null===(a=window.SaPageInfo)||void 0===a||null===(c=a.page_param)||void 0===c?void 0:c.traceid,faultReason:l};s&&(d.tspABTest=s),daEventCenter.triggerNotice({daId:"1-7-1-1",extraData:d,target:i.target||""})},D=(o={})=>{o._cartInfo.skuCode=o._cartInfo.skuName="",o._cartInfo.selectedAttrIndex={}};function T(o,t){var i;if(!o||!t)return;D(o);const n=null===(i=t._cartInfo)||void 0===i?void 0:i.skuCode;n&&N(n,o),o._cartInfo.isMainGoods=!!t._cartInfo.isMainGoods,o._cartInfo.selectStatus=!1,t._cartInfo.selectStatus&&(o._cartInfo.isSoldOut||o._cartInfo.skuCode&&!k(o._cartInfo.skuCode,o)||(o._cartInfo.selectStatus=!0))}async function F(o={}){const{goods:t=[],rows:i=3}=o;if(!t.length)return;const n=[];let s={};const u=[];if(t.forEach((o=>{var t;if(!o._cartInfo.isSoldOut)return;if(null==o||null===(t=o.relatedColor)||void 0===t||!t.length)return;let i=!1;o.relatedColor.forEach((t=>{t.goods_id!=o.goods_id&&(i=!0,n.push({goods_id:t.goods_id,cat_id:t.cat_id,mall_code:t.mall_code,goods_sn:t.goods_sn}),s[t.goods_id]=o.goods_id)})),i&&u.push(o)})),!n.length)return;const[r,a]=C[i]||[],{mallInfoForSite:c=[]}=await(0,l.c)(),d={fields:{stock:1},cccParams:{},abtInfo:{},pageKey:"page_goods_detail_rec",subPageKey:r,sceneKey:a,goods:n,mallInfo:c};await e.A.getAtomicInfoNew(d);const m=n.reduce(((o,t)=>(o[t.goods_id]=t,o)));u.forEach((o=>{const t=[],i=[];o.relatedColor.forEach((o=>{const n=m[o.goods_id];n&&(t.push(n),0==o.stock||0==o.is_on_sale||i.push(o))})),t.length!==i.length&&(o._cartInfo.isSpuSoldOut=!0)}))}function B(o=[]){o.forEach((o=>{var t;null!=o&&null!==(t=o._cartInfo)&&void 0!==t&&t.selectStatus&&(o._cartInfo.selectStatus=!1)}))}const M=(o={},t={})=>{const{code:i,info:n={},tips:e}=o;let l="";if(0==i)return o;{const o=(null==n?void 0:n.limitCount)||"";return l="300402"==i?t.value.SHEIN_KEY_PC_14617||"Out of Stock":["200401","500301"].includes(i)?t.value.SHEIN_KEY_PC_14661||"limit quantity":["500306","500302","300417","500303"].includes(i)?(0,d.v)(o,(null==n?void 0:n.resultLimit)||0,(null==n?void 0:n.remainNum)||0,e):"300407"==i?e:t.value.SHEIN_KEY_PC_14605||"error",{_errorTips:l}}},V=async(o={})=>{const{itemConfig:t,goods:i}=o;if(!i.length)return;const n=g(await w({goods:i,itemConfig:t})).reduce(((o,t)=>(o[t.goods_id]=t,o)),{}),e=[],l=[];return i.forEach(((o,t)=>{const s=n[o.goods_id],u=o._cartInfo.selectStatus;return(o._cartInfo.isSoldOut&&!o._cartInfo.isOnlySkuSoldOut)!==s._cartInfo.isSoldOut?(l.push(s),o._cartInfo.isMainGoods&&(s._cartInfo.isMainGoods=!0),i.splice(t,1,s),void(u&&e.push(s))):u&&o._cartInfo.skuCode&&!k(o._cartInfo.skuCode,s)?(o._cartInfo.isMainGoods&&(s._cartInfo.isMainGoods=!0),i.splice(t,1,s),void e.push(s)):void 0})),{selectSoldOut:e,diffSoldOutList:l}},j=({options:o={}})=>{var t;const{click_type:i,isPopup:n,activity_from:e,reportCode:l,posKeys:s,series_no:r}=o,a={abtest:(null===(t=(0,u.T2)({posKeys:s}))||void 0===t?void 0:t.sa)||"-",activity_from:e,style:n?"popup":"detail",tab_list:"-",location:n?"popup":"page",click_type:i};return r&&(a.series_no=r),{id:"1-8-10-2",code:l,data:a}};function G(o,t={}){return(0,d.v)(o,t.SHEIN_KEY_PC_27312)}function R(o={},{showEstimatedPrice:t=!1}={}){return t?o:(0,h.lY)(o)}},740955:function(o,t,i){i.d(t,{$n:function(){return v},M8:function(){return c},_R:function(){return a},ac:function(){return f},av:function(){return _},i2:function(){return g},jZ:function(){return m},lY:function(){return S},yV:function(){return d}});var n=i(794103),e=i(91206),l=i(592524),s=i(544501),u=i(22299);const r=1000719,a=[161,134,1000557,25,31,179,40,129,1000586,54,66,133,73,74,150,1000585,77,79,207,90,92,99,101,106,168,109,1000558,113,180,1000104,1000437,1000438,1000627,1000665,1000667,23,58,9,47,1000709,217,1000713,1000712,1000670,1000004,1000545,1000010,1001120];function c(o){var t,i;return null===(t=[o])||void 0===t||null===(i=t.includes)||void 0===i?void 0:i.call(t,r)}function d(o){return!(!Array.isArray(o)||!o.length)&&!!o.some((o=>{var t;return!!c(null==o?void 0:o.attr_id)||!(!Array.isArray(o)||!o.length)&&c(null===(t=o[0])||void 0===t?void 0:t.attr_id)}))}function m(o={}){var t;if(null==o||!o.cat_id)return[];let i=[o.cat_id];if(null!==(t=o.children)&&void 0!==t&&t.length){const t=o=>{o.forEach((o=>{var n;o&&o.cat_id&&i.push(o.cat_id),null!==(n=o.children)&&void 0!==n&&n.length&&t(o.children)}))};t(o.children)}return i}async function _(o,t,i,n){var r,a;if(!o)return;if(!(0,u.isLogin)())return;if(o.isAb)return;const{EstimatedPrice:c}=o;if("Non_Threshold"!==(null==c||null===(r=c.p)||void 0===r?void 0:r.E_Price_Cal)&&"Have_Threshold"!==(null==c||null===(a=c.p)||void 0===a?void 0:a.E_Price_Cal))return;let d=(()=>{var t,i,n;if(null!=o&&null!==(t=o.optimalCouponList)&&void 0!==t&&t.length)return(null==o||null===(i=o.optimalCouponList)||void 0===i||null===(n=i.filter((o=>{const t=1==(null==o?void 0:o.is_bind),i=1!=(null==o?void 0:o.bind_status);return t&&i})))||void 0===n?void 0:n.map((o=>null==o?void 0:o.coupon_code)))||[]})()||[];d.length&&(0,l.A)({method:"POST",url:"/api/productInfo/bindCoupon/post",data:{coupon_codes:d}}).then((o=>{var l,u,r,a;const c=!o||0!=o.code||(null===(l=o.info)||void 0===l||null===(u=l.failureList)||void 0===u||null===(r=u.find)||void 0===r?void 0:r.call(u,(o=>d.includes(o.couponCode))));c?n&&n(!1):(n&&n(!0),i&&(0,s.R)({content:t.SHEIN_KEY_PC_26346||"We automatically help you to claim coupons"}));const m=null===(a=(0,e.T2)({posKeys:"EstimatedPrice"}))||void 0===a?void 0:a.sa;daEventCenter.triggerNotice({daId:"1-8-6-93",extraData:{coupon_id:d.join(","),status:c?0:1,abtest:m}})}))}const p={Pic2:"Pic2"};class h{static init({type:o=p.Pic2}={}){return new Promise((t=>{const{Config:i}=this,n=i[o];n?n.inited?t():n.loading?this.promiseQueue.push({resolve:t,type:o}):(n.loading=!0,(0,l.A)({url:"/api/productAtom/cardConfig/get",method:"get",params:{newProductCard:!0,column:2}}).then((i=>{const{cardConfig:e,fields:l}=(null==i?void 0:i.info)||{};n.ItemConfig=e||{},n.AtomFields=l||{},n.inited=!0,n.loading=!1,this.dealPromiseQueue(o,!0),t()})).catch((()=>{n.loading=!1,this.dealPromiseQueue(o,!1),t(!1)}))):t(!1)}))}static getItemConfig(o=p.Pic2){var t;return Object.freeze((null===(t=this.Config[o])||void 0===t?void 0:t.ItemConfig)||{})}static getAtomFields(o=p.Pic2){var t;return Object.freeze((null===(t=this.Config[o])||void 0===t?void 0:t.AtomFields)||{})}static dealPromiseQueue(o,t=!0){this.promiseQueue.filter((t=>t.type===o)).forEach((({resolve:o})=>{o(t)}))}}async function f(o={}){var t,i,n,l,s,u,r,a;const[c]=await Promise.all([(0,e.r3)(),h.init()]),{DetailStarReview:d,detailKeyAttribute:m,pcwordSize:_,listtagSorting:f,listrankingTag:v,listattributeLabels:g,listwithCoupon:S,listwithS3:I}=c,{isPaidUser:P,type:y=p.Pic2}=o,b=!(null==f||null===(t=f.p)||void 0===t||!t.tagsortingContent),E="on"===(null==v||null===(i=v.p)||void 0===i?void 0:i.rankingTag);return{_isPaidUser:P,showTitle:!0,showAddBagBtn:!0,...{...h.getItemConfig(y),showDiscountLabelBeforeGoodsName:!1,showDiscountLabelAfterPrice:!0,showDiscountLabelBeforeGoodsNameHighPriority:!1,showMultiColor:!0,showStarComment:["B","star"].includes(null==d||null===(n=d.p)||void 0===n?void 0:n.DetailStar),showDecisionAttr:"show"===(null==m||null===(l=m.p)||void 0===l?void 0:l.DetailKeyAttribute),showSellingPoint:!0,showEstimatedPriceReachThreshold:!1,showQuickShip:!0,showLocalSeller:!0,showBadge:!0,showMainImgColor:!0,showPriceDiscountDesc:!0,showUserBehaviorLabel:!0,showUserCommentKeywordsLabel:!0,showBeltLabel:!0,showRankingList:!0,showEstimatedPriceOnSale:!0,showSheinClubDiscountValue:!1,showSheinClubDiscountValueAfterPrice:!1,showSheinClubLabelInServicesLabel:!1,showSheinClubPriceOnSale:!!P,showSheinClubNewLabel:!!P,showNewFlashNewLabel:!0,showPromotion:!0,showPromoLabel:!0,showBestDealLabel:!0,hideRetailPrice:!0,hideDiscountBadge:!0,isCamelCasePrice:"pcnewSize"===(null==_||null===(s=_.p)||void 0===s?void 0:s.pcwordSize),showPropertyUpsell:"Labels"===(null==g||null===(u=g.p)||void 0===u?void 0:u.attributeLabels),showHorseRaceLabel:b,addRankingLabelToSwiper:E,showNewStyleEstimated:"withCoupon"===(null==S||null===(r=S.p)||void 0===r?void 0:r.listwithCoupon),showS3VipPriceOnSale:"withS3"===(null==I||null===(a=I.p)||void 0===a?void 0:a.listwithS3),useHoverEffect:!1}}}async function v({newProductCard:o=!0,isPaidUser:t}){var i,n,l,s,u,r,a,c,d,m;const _=await(0,e.r3)(),p=(null==_||null===(i=_.detailgoodsCard)||void 0===i||null===(n=i.param)||void 0===n?void 0:n.detailGoods)||"",h="flashSale"==(null==_||null===(l=_.listflashSale)||void 0===l||null===(s=l.param)||void 0===s?void 0:s.listflashSale);return{newPreHandle:!0,isPaid:o&&t?1:0,abtInfoV3:{newProductCard:o,starReview:(null==_||null===(u=_.DetailStarReview)||void 0===u||null===(r=u.param)||void 0===r?void 0:r.DetailStar)||"",listflashSale:h,listQuickShip:(null==_||null===(a=_.listquickship)||void 0===a||null===(c=a.p)||void 0===c?void 0:c.listquickship)||"",listquickKey:(null==_||null===(d=_.listquickshipKey)||void 0===d||null===(m=d.p)||void 0===m?void 0:m.listquickKey)||""},atomCccParams:{displayWindowAbtBranch:p}}}async function g({newProductCard:o=!0,type:t=p.Pic2}={}){var i,n;const[l]=await Promise.all([(0,e.r3)(),h.init()]),{localMall:s,listwithCoupon:u}=l;return{...h.getAtomFields(t),realStock:o&&"show"===(null==s||null===(i=s.p)||void 0===i?void 0:i.localMall),maskLayer:!0,..."off"===(null==u||null===(n=u.p)||void 0===n?void 0:n.listwithCoupon)?{estimatedPrice:!1}:{}}}(0,n.A)(h,"promiseQueue",[]),(0,n.A)(h,"Config",{[p.Pic2]:{inited:!1,loading:!1,ItemConfig:{},AtomFields:{}}});const S=(o={},t=!0)=>({...o,showEstimateTag:!1,showEstimatedPriceReachThreshold:!1,showEstimatedPriceOnSale:!1,showEstimatedPrice:!1,showNewStyleEstimated:!1,...t?{showABPriceOnSale:!0,showABPriceTag:!0}:{}})},247630:function(o,t,i){i.d(t,{O:function(){return l}});var n=i(412167);const e=({productItem:o=null,key:t=null,value:i=null}={})=>{o&&t&&(o.pretreatInfo||(o.pretreatInfo={}),o.pretreatInfo[t]=i)},l=({products:o,promotionInfoFromServer:t,language:i})=>((({products:o=[],promotionInfoFromServer:t={},language:i={}}={})=>{n.f.assignItemsSync({items:o,isGetLable:!0,isAppPromotion:!0,promotionInfoFromServer:t,language:i}),o.forEach((o=>{const t=(o.promotionModule.rawModule||[]).filter((o=>{if(o.typeId){if(31==+o.typeId)return 3===o.promotion_logo_type;if([3,10,11].includes(+o.typeId))return!0;if(o.lable)return!0}return!1}))||[];(({productItem:o,mixPromotionInfo:t}={})=>{var i,n,e,l;const s=({serviceLabels:o})=>{var i;const n=null===(i=t[0])||void 0===i?void 0:i.lable,e=o.findIndex((o=>o.promotionLabel));e>-1&&(n?o[e].promotionLabel=n:o.splice(e,1))};s({serviceLabels:(null==o||null===(i=o.pretreatInfo)||void 0===i||null===(n=i.pcStandardView)||void 0===n?void 0:n.serviceLabels)||[]}),s({serviceLabels:(null==o||null===(e=o.pretreatInfo)||void 0===e||null===(l=e.pcBroadwiseView)||void 0===l?void 0:l.serviceLabels)||[]})})({productItem:o,mixPromotionInfo:t}),e({productItem:o,key:"mixPromotionInfo",value:t}),e({productItem:o,key:"promotionReady",value:!0})}))})({products:o,promotionInfoFromServer:t,language:i}),o)}}]);
//# sourceMappingURL=24470-b8cdab2f344b1b1d.js.map