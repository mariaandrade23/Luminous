"use strict";(self.webpackChunkSHEIN_W=self.webpackChunkSHEIN_W||[]).push([[76712],{836744:function(t,e,r){r.d(e,{iy:function(){return o}});var s=r(26091);const i=[["s","search"],["r","recommend"],["u","userGrowth"]],o=t=>{const e={},r=(()=>{const t=(0,s.R)("uswitch");let e;if(t){const r=decodeURIComponent(t).split(".").map((t=>t.split("-")));e=i.reduce(((t,e)=>{const s=r.find((([t,r])=>t===e[0]&&0==r));return t[e[1]]=s?0:1,t}),{})}return e})();return r&&Object.keys(r).length&&(e["uberctx-personal-switch"]=encodeURIComponent(JSON.stringify(r))),t.headers=Object.assign(e,t.headers),t}},905261:function(t,e,r){var s=r(794103),i=r(592524),o=r(100677),a=r(665640);const n={forgetPassword:"click_fpwordriskverify",forgetPhone:"click_fpwordriskverify",resetPhone:"click_fpwordriskverify",loginEmail:"click_loginriskverify",loginPhone:"click_loginriskverify",phoneCodeSend:"click_loginriskverify",signupEmail:"click_registerriskverify",signupPhone:"click_registerriskverify",quickRegister:"click_registerriskverify"},c=["JyRisk","JyRiskReg","JyRiskZTReg"];e.A=class{constructor(){(0,s.A)(this,"abtResult",{}),(0,s.A)(this,"isSupportGeetest",!0),(0,s.A)(this,"isShouldInit",!1),(0,s.A)(this,"info",{}),(0,s.A)(this,"challange",""),(0,s.A)(this,"verifyCb",[]),(0,s.A)(this,"gtInstance",null),(0,s.A)(this,"from",""),(0,s.A)(this,"isReInitStatus",!1),(0,s.A)(this,"isGtInstanceReady",!1),(0,s.A)(this,"errorTriggerTimes",0),(0,s.A)(this,"reInitTimes",0),(0,s.A)(this,"riskMaskValue",""),(0,s.A)(this,"isResetting",!1),(0,s.A)(this,"isSetXhrListen",!1),(0,s.A)(this,"chanllangeTimestap",0),(0,s.A)(this,"ajaxParams",""),(0,s.A)(this,"staticUrl",""),(0,s.A)(this,"fullpageJs","")}register(t,e=""){(0,i.A)({url:`/geetest/register?riskType=${e}`,timeout:2e4}).then((r=>{var s;const{status:i,data:o}=r;if(this.fullpageJs=(null==o?void 0:o.fullpage)||"",this.staticUrl=(null==o||null===(s=o.static_servers)||void 0===s?void 0:s[0])||"",this.info=o,this.isShouldInit=0==i,this.isShouldInit)return this.chanllangeTimestap=Date.now(),this.listenXhrComplete(),void this.fetchFullPageResource(t,!!e);this.isReInitStatus&&(this.isReInitStatus=!1),"function"==typeof t&&t({status:"pass"})})).catch((e=>{this.errorReport(e,e.statusText,"/geetest/register"),this.isReInitStatus||"function"==typeof t&&t({status:"error"})}))}listenXhrComplete(){if(this.isSetXhrListen)return;this.isSetXhrListen=!0;const t=XMLHttpRequest.prototype.open,e=this;XMLHttpRequest.prototype.open=function(){let r=arguments;this.addEventListener("load",(function(){/geetest\/ajax\.php$/.test(this.responseURL)&&e.sendGtVerifyResult(this.responseText),/geetest\/reset\.php$/.test(this.responseURL)&&(e.chanllangeTimestap=Date.now(),e.recallVerfy(),e.isResetting=!1)})),this.addEventListener("error",(function(t){const s=r&&r[1];s&&/geetest\/(ajax|get|refresh|reset)\.php$/.test(s)&&(e.errorReport(t,"network error",s),e.isGtInstanceReady||"function"==typeof e.initCb&&e.initCb())})),this.addEventListener("timeout",(function(t){const s=r&&r[1];s&&/geetest\/(ajax|get|refresh|reset)\.php$/.test(s)&&(e.errorReport(t,"timeout",s),e.isGtInstanceReady||"function"==typeof e.initCb&&e.initCb())})),/geetest\/ajax\.php$/.test(r[1])&&(e.isSendingAjaxPhP=!0),t.apply(this,r)};const r=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){!0===e.isSendingAjaxPhP&&(e.ajaxParams=arguments[0],e.isSendingAjaxPhP=!1),r.apply(this,arguments)}}sendGtVerifyResult(t){let e={};try{e=JSON.parse(t)}catch(t){}const r=e.data||{};this.riskMaskValue=r&&r.risk;let s=1;0===e.status&&"success"===r.result&&"fullpage"===r.sub_type&&(s=0);const i=n[this.from];if(!this.from)return;const o="undefined"!=typeof SaPageInfo?SaPageInfo:{start_time:Date.now()},a={verification_result:s,sessionid_shein:e.token||""};r.sub_type&&(a.sub_type=r.sub_type),r.score&&(a.score=r.score),r.result&&(a.success="success"===r.result?0:1);const c=Object.assign({},o,{activity_name:i,activity_param:a});sa("send",c)}async getGtAbtResult(t){if(!this.isSupportGeetest)return"function"==typeof t&&t({status:"not_support"});this.initCb=t;try{let e={JyRisk:{param:"on",poskeys:"JyRisk"},JyRiskReg:{param:"on",poskeys:"JyRiskReg"},JyRiskZTReg:{param:"on",poskeys:"JyRiskZTReg"}};if(this.setAbtResult(e),this.showInitGTinstance())return void this.register(t)}catch(t){this.abtResult={}}this.isShoudInitGt=!1,"function"==typeof t&&t({status:"error"})}setAbtResult(t){c.forEach((e=>{this.abtResult[e]=t[e]||{}}))}getItemResult(t){return!(this.abtResult[t]&&"off"===this.abtResult[t].param)&&this.isShouldInit}showInitGTinstance(){return!0}urlConversion(t){return t.replace(/^(https?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&=]+)?(#[0-9-a-z]+)?/i,"https://$2$3$4$5$6")}fetchFullPageResource(t){if(!this.isShouldInit||!this.isSupportGeetest)return;if(1==this.isGtInstanceReady)return void this.initGeetestInstance(t);this.staticUrl=this.urlConversion(this.staticUrl);const e=`${this.staticUrl}/${this.fullpageJs}`;(0,o.t)({label:"script",attrs:{async:!0,src:e}}).then((()=>{this.initGeetestInstance(t)})).catch((e=>{a.log("fullpage.js error ......"),a.log(e),this.errorReport(e,"fullpage.js load error",""),"function"==typeof t&&t({status:"error"})}))}initGeetestInstance(t){const e={...this.info,product:"bind",lang:(r=gbCommonInfo.appLanguage,"pt-br"===r?"pt":"he"===r?"iw":r),next_width:"300px",timeout:2e4,pure:!0};var r;try{const r=new window.Geetest(e);r.onReady((()=>{this.isGtInstanceReady=!0,this.gtInstance=r,"function"==typeof t&&t({status:"complete"}),this.verifyCb.length>0&&this.gtInstance.verify()})),r.onSuccess((()=>{const{geetest_challenge:t}=r.getValidate();setTimeout((()=>{this.verifyCb.forEach((e=>{e({status:"success",challenge:t,risk:this.riskMaskValue}),this.verifyCb.shift()}))}),0)})),r.onClose((()=>{this.verifyCb.forEach((t=>{t({status:"close"}),this.verifyCb.shift()}))})),r.onError((e=>{a.log("error sdk ....",e),this.errorReport(e,"sdk error",""),"function"==typeof t&&t({status:"error"}),this.verifyCb.forEach((t=>{t({status:"error"}),this.verifyCb.shift()}))}))}catch(e){this.errorReport(e.stack,"sdk init error",""),"function"==typeof t&&t({status:"error"})}}verify(t,e=""){var r;a.log("reInitTimes",this.reInitTimes),!this.isGtInstanceReady||this.reInitTimes>=4?t({status:"error"}):(this.from=e,"function"==typeof t&&this.verifyCb.push(t),null===(r=this.gtInstance)||void 0===r||r.verify())}verifyPromise(t,e=""){return new Promise((r=>{if(!this.getItemResult(t))return r({status:"abt-off"});this.verify((t=>{r(t)}),e)}))}recallVerfy(){this.isResetting&&this.verifyCb.length>0&&this.gtInstance.verify()}reset(){this.isResetting=!0,this.gtInstance.reset()}reInitGt(t){this.reInitTimes>5||(this.reInitTimes++,this.isReInitStatus=!0,this.getGtAbtResult(t))}errorReport(t,e,r){const s=t&&t.target?t.target:t;if("object"==typeof s&&("1021"==s.error_code||"1012"==s.error_code))return;this.errorTriggerTimes++;const{SA_REPORT_URL:i}="undefined"!=typeof gbCommonInfo&&gbCommonInfo.REPORT_URL||{};"undefined"!=typeof ErrorJs&&ErrorJs.sendError("error",i+"/unusual",{errorMark:"GeeTestBrowserError",errorType:e,errorInfo:JSON.stringify(s),errorPath:r,errrorTimes:this.errorTriggerTimes})}}},353583:function(t,e,r){r.d(e,{A:function(){return g}});const s={"/api/cart/checkcart/get":{all:!0},"/api/cart/add/create":{all:!0},"/api/cart/add_mall/create":{all:!0},"/api/cart/update":{all:!0},"/api/cart/update_attr_mall/update":{all:!0},"/api/cart/delete":{all:!0},"/api/cart/batchDelete/update":{all:!0},"/cart/saveforlater":{all:!0},"/api/user/wishlist/add":{all:!0},"/api/cart/batchWishGoods/update":{all:!0},"/api/checkout/paymentList/get":{all:!1,excludes:["card_no","card_pin"]},"/api/checkout/shippingList/get":{all:!1,excludes:["card_no","card_pin"]},"/checkout/cacu_total":{all:!0},"/api/checkout/mallCacuTotal/get":{all:!0},"/api/checkout/order/update":{all:!1,includes:["editType"]},"/checkout/switch_payment":{all:!0},"/ltspc/pay/unPay/unifiedPay":{all:!1,includes:["billno","paymentCode","routeId"]},"/ltspc/pay/binCheck":{all:!0},"/ltspc/pay/preRouting":{all:!0},"ltspc/pay/unPay/complete":{all:!0}},i=[{path:/^\/user\/orders\/detail\/\w+/,all:!0}];var o=r(665640);const a=[];let n="";const c=[],u=[/^\/(api\/)?(cart|user|checkout|getCouponListForOrderStore|getCouponListForOrder|pay|ltspc)/],l=["language","theme"],p=[0,1e3,-1],{NODE_SERVER_ENV:h,langPath:d}=gbCommonInfo;var g=new class{isFilterRoute(t){const e=t&&t.url&&t.url.split("?")[0];return c.includes(e)}isIncluseRoutes(t){const e=t;return u.some((t=>t.test(e)))}isReportCode(t={},e){const r=t&&Object.prototype.hasOwnProperty.call(t,"code")?t.code:"undefined";return"undefined"===r?e&&200!=e.status:!p.includes(parseInt(r,10))}isFilterEnvs(){return a.includes(h)}isFilterArea(t){return l.includes(t)}transformResponse(t){let e={};try{t.responseType&&"json"==t.responseType?e=t.response||t.responseJson:t.responseText&&(e=JSON.parse(t.responseText))}catch(e){o.log(t),o.log(e)}return e}parseString(t){try{return JSON.stringify(t)}catch(t){return""}}formatReportParams(t,e={},r,s={}){return"object"==typeof e&&Object.keys(e).forEach((r=>{this.isFilterArea(r)||("object"==typeof e[r]?t[r]=this.parseString(e[r]):t[r]=e[r])})),t=this.addRequstParams(t,r,s)}parseRequestParams(t,e=""){if("[object Object]"==Object.prototype.toString.call(t))return t;let r=Object.create(null);if("[object String]"==Object.prototype.toString.call(t)){if(e.includes("application/json")){try{r=JSON.parse(t)}catch(t){}return r}if(!(t=t.trim().replace(/^(\?|#|&)/,"")))return r;t.split("&").forEach((function(t){let e=t.replace(/\+/g," ").split("="),s=e.shift(),i=e.length>0?e.join("="):void 0;if(s=decodeURIComponent(s),s.endsWith("[]")&&(s=s.slice(0,-2)),void 0===i)i=null;else try{i=decodeURIComponent(i)}catch(t){}void 0===r[s]?r[s]=i:Array.isArray(r[s])?r[s].push(i):r[s]=[r[s],i]}))}return r}getRequestData(t,e){return"GET"==e.type?t.apiSearch||"":e.data||null}getNeedParsePath(t){const{apiPath:e}=t;let r={};if(s[e])return r=s[e],{isNeed:!0,pathConfig:r};const o=i.find((t=>{const{path:r}=t;return!!new RegExp(r).test(e)}));return o?{isNeed:!0,pathConfig:o}:{isNeed:!1,pathConfig:r}}addRequstParams(t,e,r={}){var s,i;const o=this.getRequestData(t,r);if(!o)return t;const{isNeed:a,pathConfig:n}=this.getNeedParsePath(t);if(!a)return t;const c=(null===(s=r.headers)||void 0===s?void 0:s["Content-Type"])||(null===(i=r.headers)||void 0===i?void 0:i["content-type"])||"",u=this.parseRequestParams(o,c),{includes:l=[],excludes:p=[],all:h}=n;let d={};return h?(d=u,t.requestParams=JSON.stringify(d),t):l.length>0?(l.forEach((t=>{void 0!==u[t]&&(d[t]=u[t])})),t.requestParams=JSON.stringify(d),t):p.length>0?(Object.keys(u).forEach((t=>{p.includes(t)||(d[t]=u[t])})),t.requestParams=JSON.stringify(d),t):(t.requestParams=JSON.stringify(d),t)}formatApiPath(t){const e=t.indexOf("/ltspc");return e>=0?t.slice(e):t.replace(d,"")}getPublicParams(t,e){const r={};let[s="",i=""]=e.url&&e.url.split("?")||[];const o=document.createElement("a");return o.href=s,s=o.pathname,r.apiPath=this.formatApiPath(s),this.customParam({obj:r,xhr:t,opts:e}),r.apiSearch=i,r.userAgent=navigator&&navigator.userAgent||"",r.page_name=window.getSaPageInfo&&window.getSaPageInfo.page_name||window.SaPageInfo&&window.SaPageInfo.page_name||"",r.status_code=t.status,r.cookieSize=document&&document.cookie&&document.cookie.length,r.hrefSize=location&&location.href&&location.href.length,r}customParam({obj:t,opts:e}){if(t.apiPath.indexOf("/unifiedPay")>-1){let r=e.data.split("&");r=r.filter((t=>t.indexOf("paymentCode")>-1)),r=r[0]&&r[0].split("=")||[];const s=r[1]||"";t.payment_code=s}}sendReport(t,e={},r={}){try{if(this.isFilterEnvs())return;const t=this.transformResponse(e);if(!this.isReportCode(t,e))return;const s=this.getPublicParams(e,r);if(this.isFilterRoute(r))return;if(!this.isIncluseRoutes(s.apiPath))return;if("undefined"==typeof sa)return;this.formatReportParams(s,t,e,r),this.report(s)}catch(t){o.log(t)}}sendReportForScHttp(t){this.sendReport(null,null==t?void 0:t.request,null==t?void 0:t.config)}report(t){try{if("undefined"==typeof sa)return;if(!n){const{SA_REPORT_URL:t}=gbCommonInfo.REPORT_URL;n=`${t}/orgSsaUnusual`}window.sa("error",n,t)}catch(t){o.log(t)}}}},119362:function(t,e,r){r.d(e,{F:function(){return o}});var s=r(561748);const i=["/api/abt/userinfo/query","/api/common/language/get","/api/robot/match/query","/api/robot/dialog/get","/api/robot/match/multi/query","/api/robot/channel/check/query","/api/robot/chat/template/query","/api/robot/zdtk/template/query","/api/robot/theme/get","/api/robot/chat/check/query","/api/robot/gwotk/tax/create","/api/robot/gwotk/dulyDeliver/create","/api/robot/cstk/create","/api/robot/gwotk/create","/api/robot/gwotk/quality/create","/api/robot/cschat/token/get","/api/robot/cschat/end/delete","/api/robot/cschat/conversation/create","/api/robot/cschat/message/create","/api/robot/cschat/evaluation/create","/api/robot/cschat/messageReport/create","/api/productList/info/get","/api/cart/checkcart/get","/api/cart/getSaveForLater/get","/api/cart/getCartCoupons/get","/api/cart/getCartSumQuantity/get","/api/cart/getDetainment/get","/api/cart/update","/api/cart/delete","/api/cart/checkStock/get","/api/cart/getIntegrityPromotionInfo/get","/api/cart/batchDelete/update","/api/cart/batchWishGoods/update","/api/cart/modifyCartCheckStatus/update","/api/cart/add_mall/create","/api/cart/batch_add_mall/create","/api/cart/update_attr_mall/update","/api/cart/pageLogo/get","/api/cart/communalNoticeCart/get","/api/cart/getPromotionById/get","/api/cart/getAddBuyProductList/get","/api/cart/getGiftProductList/get","/api/cart/postFreeMall/get","/api/cart/postSimpleFreeMall/get","/api/cart/getCartBriefInfo/get","/api/cart/postSpuProductsCart/get","/api/cart/getCartAllInfo/get","/api/cart/getIncludeTaxInfo/get","/api/cart/queryLatestUnPaidOrderInfo/get","/api/cart/getDefaultAddress/get","/api/checkout/get","/api/checkout/mallOrder/create","/api/pay/unifiedPay/create","/result/unifiedCb","/pay/result/success","/pay/result/fail","/api/giftcard/checkout/order/create","/api/user/dashboard/base/get","/api/productList/urlByCode/get","/api/user/addressbook/addressCheckRule/get","/api/user/addressbook/countrySensitiveList/query","/api/user/addressbook/storeConfigInfo/get","/api/user/addressbook/accountAndOrderEmail/get","/api/orders/base/queryAddressInfo/query","/api/user/addressbook/universalCountryList/get","/api/user/addressbook/addressFormConfigByInfo/get","/api/user/addressbook/limitAddr/query","/api/coupon/getCouponPackage/init","/api/coupon/bindCouponPackage/update","/api/coupon/getCouponRemind/init"];function o(t,{responseTime:e}){i.some((e=>e===t))&&s.JY.metricTime({metric_name:"web_request_duration",tags:{path:t},value:e},{random:.05})}},561748:function(t,e,r){r.d(e,{Vc:function(){return p},JY:function(){return h},Ay:function(){return g},cA:function(){return d}});var s=r(202941),i=r(518295),o=r(26091),a=r(665640);if("undefined"!=typeof window&&!gbCommonInfo.ENABLE_MONITOR_UNION){const{PUBLIC_CDN:t,SERVER_TYPE:e,NODE_SERVER_ENV:s,IS_RW:n,SiteUID:c,appLanguage:u,currency:l}=gbCommonInfo;r.p=`${t}/she_dist/assets/`,i.h.init({server_type:"usa"===e?"us":e,brand:n?"romwe":"shein",device_type:"pc",language:u,currency:l,env:"production"===s?"production":"debug",site_uid:c}),i.h.registerField({member_id:function(){if("undefined"==typeof window)return"";let t=(0,o.R)("memberId");try{if(t)return t;const e=localStorage.getItem("auth_member")||"null";return(JSON.parse(e)||{value:{}}).value.member_id||""}catch(t){return""}},device_id:()=>(0,o.R)("cookieId"),params(){var t;return{server_from:"aidc-web-pc",page_name:(null===(t=window.SaPageInfo)||void 0===t?void 0:t.page_name)||"other"}}});const p={cache:{loop_time:5e3},record_when_page_hidden:!0};if("localhost"===s){const t="1"==sessionStorage.getItem("skynet_fetch"),e="1"==sessionStorage.getItem("skynet_log");t||(p.http={generator(){return t=>{var r;e&&a.log("@@@@@@@@@@@@@@@@@",t.url.replace(/.*\/app-track\//,""),null==t||null===(r=t.data)||void 0===r?void 0:r.data,"@@@@@@@@@@@@@@@@@")}}})}i.h.config(p),(t=>{const{ERROR_JS_SWITCH_OLD_ON:e}=gbCommonInfo;if(!t||1==e)return;const r=function(e){const r=e.tag||e.errorMark||e.type||e.errorType;t.SILogger.logInfo({tag:r,message:r,params:e})},s=function(e){const{metricName:r,...s}=e;t.SIMetric.metricCount({metric_name:r,tags:s})};if(window.ErrorJs){var i,o,a,n,c,u;if(null!==(i=window.ErrorJs)&&void 0!==i&&null!==(o=i.log_proxy)&&void 0!==o&&null!==(a=o.queues)&&void 0!==a&&a.length)for(;window.ErrorJs.log_proxy.queues.length;){const t=window.ErrorJs.log_proxy.queues.shift();r(t)}if(null!==(n=window.ErrorJs)&&void 0!==n&&null!==(c=n.monitor_proxy)&&void 0!==c&&null!==(u=c.queues)&&void 0!==u&&u.length)for(;window.ErrorJs.monitor_proxy.queues.length;){const t=window.ErrorJs.monitor_proxy.queues.shift();s(t)}window.ErrorJs.log_proxy=r,window.ErrorJs.monitor_proxy=s}else window.ErrorJs={sendError:function(t,e,i){if(e.indexOf("/unusual")>-1)return i.reportList&&i.reportList.forEach((function(t){t.metricName&&s(t)})),void r(i);window.sa&&(window.sa(t,e,i),r(Object.assign(i,{tag:"error-js-report-other"})))}}})(i.h),r.e(151).then(r.bind(r,583435))}var n=i.h;const c=i.h.SILogger,u=i.h.SIMetric,l=gbCommonInfo&&gbCommonInfo.ENABLE_MONITOR_UNION,p=l?s.Vc:c,h=l?s.JY:u,d=s.cA;var g=l?s.h:n},558532:function(t,e,r){r.d(e,{lt:function(){return g}});var s=r(905261),i=r(794103),o=r(592524),a=r(100677),n=r(665640),c=class{constructor(){(0,i.A)(this,"isSupportGeetest",!0),(0,i.A)(this,"isShouldInit",!1),(0,i.A)(this,"info",{}),(0,i.A)(this,"challange",""),(0,i.A)(this,"verifyCb",[]),(0,i.A)(this,"gtInstance",null),(0,i.A)(this,"from",""),(0,i.A)(this,"isReInitStatus",!1),(0,i.A)(this,"isGtInstanceReady",!1),(0,i.A)(this,"errorTriggerTimes",0),(0,i.A)(this,"reInitTimes",0),(0,i.A)(this,"riskMaskValue",""),(0,i.A)(this,"isResetting",!1),(0,i.A)(this,"chanllangeTimestap",0),(0,i.A)(this,"ajaxParams",""),(0,i.A)(this,"staticUrl",""),(0,i.A)(this,"fullpageJs","")}register(t,e=""){(0,o.A)({url:"/risk/verify/identity/geetest/register",timeout:2e4,method:"POST",data:{validate_type:e}}).then((r=>{var s;const{code:i,info:o}=r;if(this.fullpageJs=(null==o?void 0:o.fullpage)||"",this.staticUrl=(null==o||null===(s=o.static_servers)||void 0===s?void 0:s[0])||"",this.info=o,this.isShouldInit=0==i,this.isShouldInit)return this.chanllangeTimestap=Date.now(),void this.fetchFullPageResource(t,!!e);this.isReInitStatus&&(this.isReInitStatus=!1),"function"==typeof t&&t({status:"pass"})})).catch((e=>{this.errorReport(e,e.statusText,"/geetest/register"),this.isReInitStatus||"function"==typeof t&&t({status:"error"})}))}showInitGTinstance(){return!0}urlConversion(t){return t.replace(/^(https?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&=]+)?(#[0-9-a-z]+)?/i,"https://$2$3$4$5$6")}fetchFullPageResource(t){if(!this.isShouldInit||!this.isSupportGeetest)return;if(1==this.isGtInstanceReady)return void this.initGeetestInstance(t);this.staticUrl=this.urlConversion(this.staticUrl);const e=`${this.staticUrl}/${this.fullpageJs}`;(0,a.t)({label:"script",attrs:{async:!0,src:e}}).then((()=>{this.initGeetestInstance(t)})).catch((e=>{n.log("fullpage.js error ......"),n.log(e),this.errorReport(e,"fullpage.js load error",""),"function"==typeof t&&t({status:"error"})}))}initGeetestInstance(t){const e={...this.info,product:"bind",lang:(r=gbCommonInfo.appLanguage,"pt-br"===r?"pt":"he"===r?"iw":r),next_width:"300px",timeout:2e4,pure:!0};var r;try{const r=new window.Geetest(e);r.onReady((()=>{this.isGtInstanceReady=!0,this.gtInstance=r,"function"==typeof t&&t({status:"complete"}),this.verifyCb.length>0&&this.gtInstance.verify()})),r.onSuccess((()=>{const{geetest_challenge:t}=r.getValidate();setTimeout((()=>{this.verifyCb.forEach((e=>{e({status:"success",challenge:t,risk:this.riskMaskValue}),this.verifyCb.shift()}))}),0)})),r.onClose((()=>{this.verifyCb.forEach((t=>{t({status:"close"}),this.verifyCb.shift()}))})),r.onError((e=>{n.log("error sdk ....",e),this.errorReport(e,"sdk error",""),"function"==typeof t&&t({status:"error"}),this.verifyCb.forEach((t=>{t({status:"error"}),this.verifyCb.shift()}))}))}catch(e){this.errorReport(e.stack,"sdk init error",""),"function"==typeof t&&t({status:"error"})}}verify(t,e=""){var r;n.log("reInitTimes",this.reInitTimes),!this.isGtInstanceReady||this.reInitTimes>=4?t({status:"error"}):(this.from=e,"function"==typeof t&&this.verifyCb.push(t),null===(r=this.gtInstance)||void 0===r||r.verify())}verifyPromise(t,e=""){return new Promise((t=>{this.verify((e=>{t(e)}),e)}))}recallVerfy(){this.isResetting&&this.verifyCb.length>0&&this.gtInstance.verify()}reset(){this.isResetting=!0,this.gtInstance.reset()}reInitGt(){this.reInitTimes>5||(this.reInitTimes++,this.isReInitStatus=!0)}errorReport(t,e,r){const s=t&&t.target?t.target:t;if("object"==typeof s&&("1021"==s.error_code||"1012"==s.error_code))return;this.errorTriggerTimes++;const{SA_REPORT_URL:i}="undefined"!=typeof gbCommonInfo&&gbCommonInfo.REPORT_URL||{};"undefined"!=typeof ErrorJs&&ErrorJs.sendError("error",i+"/unusual",{errorMark:"GeeTestBrowserError",errorType:e,errorInfo:JSON.stringify(s),errorPath:r,errrorTimes:this.errorTriggerTimes})}},u=r(346583),l=r(845266),p=r(716650),h=r(665640);const d="_f_c_llbs_";async function g(t,e){let r={},i="";if(![901,902,903,904,905].includes(Number(t)))return{status:"error",challenge:"",risk:""};try{const{"risk-id":t}=(0,p.J)(location.search);if(t){var a,n,g,f,y,m,v,_;null===(a=window)||void 0===a||a.sa("set","setPageData",window.SaPageInfo);const e=(null===(n=window)||void 0===n||null===(g=n.AntiIn)||void 0===g?void 0:g.syncGetAllEncrypted(null===(f=window)||void 0===f?void 0:f.AntiIn.Channel.PC))||null,r=encodeURIComponent(location.href),s=(null===(y=window)||void 0===y?void 0:y.__ArmorToken)||(null===(m=window)||void 0===m?void 0:m.sessionStorage.getItem("armorToken"))||(null===(v=window)||void 0===v?void 0:v.localStorage.getItem("armorToken"))||null;null===(_=window)||void 0===_||_.sa("send",{activity_name:"expose_risk_envinfo",activity_param:{origin_risk_id:t,anti_in:e,armortoken:s,risk_url:r}})}}catch(t){h.log("error",t)}switch(Number(t)){case 901:case 902:i="anti_crawler_gee",r=await async function(t){const e=1==window.GB_RISK_CHALLEGE_LIMIT?new c:new s.A,r=(1==window.GB_RISK_CHALLEGE_LIMIT?{901:"gee_slide",902:"gee_click"}:{901:"slide",902:"icon"})[t]||"";if(!r)return{status:"geetest_error",msg:"captcha_type not support"};const i=await function(t,e){return new Promise((r=>{e.register(r,t)}))}(r,e),{status:o}=i;if("error"==o)return{status:"geetest_error",msg:"geetest init error"};const{status:a,challenge:n,risk:u}=await e.verifyPromise("","flow_challenge");return"close"==a?{status:"geetest_close",msg:""}:"error"==a?{status:"geetest_error",msg:"geetest request error"}:{status:"success",challenge:n,risk:u}}(t);break;default:i="anti_crawler_RT",r=await async function(t){const{"risk-id":e}=(0,p.J)(location.search);l.default.init({axiosInstance:o.A,rate:5e3});const r={validate_type:{903:"js_challenge",904:"gee_slide",905:"gee_click"}[t],validate_scene:"anti_crawler_RT",validate_channel:0,validate_param:{decision_id:e}};return new Promise((t=>{l.default.doVerify(r,(e=>{var r;const{isSuccess:s}=e;t({status:s?"success":"error",challenge:"",risk:"",validate_token:(null==e||null===(r=e.info)||void 0===r?void 0:r.validate_token)||""})})).catch((e=>{t({status:"error",challenge:"",risk:""})}))}))}(t)}const{status:R,challenge:I,risk:b,validate_token:k}=r;if("success"!=R)return r;const w={challenge:I,captcha_type:t,gRisk:b,validate_scene:i,validate_token:k||""},S=await(0,o.A)({url:"/api/risk/flow_check",method:"POST",data:w}).catch((t=>t)),C={status:0==S.status?"success":"risk_error",code:S.status,llbs:S.llbs||""};if(0==S.status){const t=parseInt(e)||0;(0,u.T)({key:d,value:S.llbs,end:2*t})}return C}}}]);
//# sourceMappingURL=76712-613532323bba2bd4.js.map