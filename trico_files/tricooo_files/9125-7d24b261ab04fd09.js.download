"use strict";(self.webpackChunkSHEIN_W=self.webpackChunkSHEIN_W||[]).push([[9125],{109125:function(e,t,i){i.d(t,{VK:function(){return A},fZ:function(){return S},lD:function(){return b}});var s=i(26091),h=i(346583),r=(i(665640),Object.defineProperty),c=(e,t,i)=>(((e,t,i)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i})(e,"symbol"!=typeof t?t+"":t,i),i);const o="RESOURCE_ADAPT",p=`${o}_WEBP`;var u=(e=>(e[e.Level0=0]="Level0",e[e.Level1=1]="Level1",e[e.Level2=2]="Level2",e[e.Level3=3]="Level3",e))(u||{});const n="_thumbnail_",a=["img.shein.com","img.romwe.com","img.ltwebstatic.com","file.ltwebstatic.com","imgdeal-test01.shein.com"],l={"320-720":720,"720-1080":720,"1080-1280":1080,"1280-1440":1280,"1440-1680":1440,"1680-1920":1680,"1920-3080":1920,"3080-4080":1920};class b{constructor(e){c(this,"deviceWidth",0),c(this,"isSupportWebp",!1),c(this,"serverSupportWebp",!1),c(this,"isMoble",!1),c(this,"designSize",0),c(this,"calculateWidth",0),c(this,"score",0),c(this,"isServer",!1),c(this,"isCookieSet",!1),c(this,"isSupprotCut",!1),c(this,"currentScene",""),c(this,"sceneMap",{}),c(this,"init",(e=>{this.setIsServer(),this.setDeviceData(e),this.setSupportWebpState(),this.isServer||(this.isSupportWebp?this.setLocaWebpState("true"):this.serverSupportWebp&&this.checkClientSupportWebp())})),c(this,"setIsServer",(()=>{this.checkIsServer()&&(this.isServer=!0)})),c(this,"setDeviceData",(e=>{const{width:t,isMobile:i,score:s,isSupportWebp:h,isSupprotCut:r,sceneMap:c,scene:o}=e;this.isMoble=i||!1,this.isSupprotCut=r||!1,this.serverSupportWebp=h||!1,this.deviceWidth=this.getDeviceWidth(t),this.score=s||0,this.sceneMap=c||{},this.currentScene=o||"",h&&(this.isSupportWebp=h),this.designSize=i?750:1366,this.calculateWidth=this.getCalculateWidth()})),c(this,"getDeviceWidth",(e=>{const t=e||this.getDefaultDeviceWidthByCookie();return!this.isMoble&&t<=1920?1920:t})),c(this,"getDefaultDeviceWidthByCookie",(()=>this.isMoble?375:1366)),c(this,"setSupportWebpState",(()=>{this.isServer||this.serverSupportWebp&&(this.isSupportWebp=Boolean(this.getLocalWebpState()))})),c(this,"checkClientSupportWebp",(()=>{(this.checkSupportWebpByCanvas()||this.checkSupportWebpByElement())&&(this.isSupportWebp=!0,this.setLocaWebpState("true")),this.checkSupportWebpByBase64()})),c(this,"checkIsServer",(()=>"undefined"==typeof window)),c(this,"getCalculateWidth",(()=>{const e=Object.keys(l),t=this.isMoble?2*this.deviceWidth:this.deviceWidth;for(let i=0;i<e.length;i++){const[s,h]=e[i].split("-");if(t>=Number(s)&&t<Number(h)||i===e.length-1&&t>=Number(h))return this.calculateWidthByScore(i,e)}return 720})),c(this,"calculateWidthByScore",((e,t)=>{let i=t[e];return this.score===u.Level3||this.score===u.Level2||this.score===u.Level0||this.score===u.Level1&&(i=t[e-1>=0?e-1:0]),l[i]})),c(this,"getLocalKey",(()=>`${o}__WEBP_SUPPORT`)),c(this,"getLocalWebpState",(()=>localStorage.getItem(this.getLocalKey())||!1)),c(this,"setLocaWebpState",(e=>{localStorage.setItem(this.getLocalKey(),e),this.isCookieSet||(this.isCookieSet=!0,!(0,s.R)(p)&&(0,h.T)({key:p,value:"1",path:"/"}))})),c(this,"checkSupportWebpByBase64",(()=>{const e=new Image;e.onload=()=>{e.width>0&&e.height>0&&!this.isSupportWebp&&(this.isSupportWebp=!0,this.setLocaWebpState("true"))},e.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="})),c(this,"checkSupportWebpByCanvas",(()=>{const e=document.createElement("canvas");return e&&0===e.toDataURL("image/webp").indexOf("data:image/webp")})),c(this,"checkSupportWebpByElement",(()=>{let e;try{const t=document,i=t.createElement("object");i.type="image/webp",i.innerHTML="!",t.body.appendChild(i),e=!i.offsetWidth,t.body.removeChild(i)}catch(t){e=!1}return e})),c(this,"cutWidth",((e,t,i)=>{let s=e*this.calculateWidth/this.designSize;if(s=48*Math.round(s/48),i&&s<i)return i;if(t&&s>t)return t;const h=this.isMoble?2:4,r=Math.floor(e+48*h);return Math.floor(s)>r?r:Math.floor(s)})),c(this,"isSupportCutImgType",(e=>/\b(\.webp|\.png|\.jpg\b)/.test(e))),c(this,"isSupportCutImg",(e=>a.some((t=>e.indexOf(t)>-1)))),c(this,"img2Webp",((e,t)=>t?e.replace(/\b(\.jpg|\.png|\.gif)\b/,".webp"):e)),c(this,"getCutToNum",((e,t,i)=>i&&e<i?i:t&&e>t?t:e)),c(this,"checkIsGif",(e=>/\b(\.gif\b)/.test(e))),c(this,"cutImg",(({imgUrl:e,width:t,max:i,min:s,cutTo:h})=>{const r=e.indexOf(n)>-1,c=this.cutWidth(t,i,s);if(r)return e.replace(/(\d+)x(\d*)(\.)(webp|png|jpg)$/,(e=>{const[t,r]=e.split("."),[o]=t.split("x");return h&&"number"==typeof h&&!Number.isNaN(h)?`${this.getCutToNum(h,i,s)}x.${r}`:`${c>Number(o)?Number(o):c}x.${r}`}));const o=e.lastIndexOf("."),p=e.slice(o);if(h&&"number"==typeof h&&!Number.isNaN(h)){const t=this.getCutToNum(h,i,s);return`${e.slice(0,o)}${n}${t}x${p}`}return`${e.slice(0,o)}${n}${c}x${p}`})),c(this,"transfromImg",(({imgUrl:e="",width:t=0,exp:i={}})=>{const{unCut:s=0,max:h=0,min:r=0,cutTo:c=0}=i||{},o=this.checkIsGif(e);if(!e)return"data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA=";const p=this.isSupportCutImg(e);this.isSupportWebp&&(e=this.img2Webp(e,p));const u=!this.currentScene||this.sceneMap[this.currentScene]&&Boolean(this.sceneMap[this.currentScene]);return this.isSupprotCut&&p&&u&&t&&!s&&!o&&this.isSupportCutImgType(e)&&(e=this.cutImg({imgUrl:e,width:t,max:h,min:r,cutTo:Number(c)})),e.replace(/^\w+:/,"")})),c(this,"updataScore",(e=>{this.score=e||0,this.calculateWidth=this.getCalculateWidth()})),c(this,"updateScene",(e=>{this.currentScene=e})),this.init(e)}}const A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXMzMzKUkQnAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",S=(e={})=>{let t="";const i=Object.keys(e);return i.forEach(((s,h)=>{t+=`${s}=${e[s]}${h!==i.length-1?"#":""}`})),t}}}]);
//# sourceMappingURL=9125-7d24b261ab04fd09.js.map