"use strict";(self.webpackChunkSHEIN_W=self.webpackChunkSHEIN_W||[]).push([[7885],{592524:function(e,n,o){o.d(n,{u:function(){return l}});var t=o(572789),r=o(138726),i=o(895117),s=o(833045),a=o(836744);const u=(()=>{if("undefined"==typeof window)return t.A;const e={baseURL:gbCommonInfo.langPath,headers:{common:{"x-csrf-token":gbCommonInfo.csrf_token,"x-requested-with":"XMLHttpRequest"}},params:{_ver:"1.1.8",_lang:gbCommonInfo.appLanguage}};gbCommonInfo.csrf_token&&(e.headers.common["x-csrf-token"]=gbCommonInfo.csrf_token);const n=t.A.create(e);return n.updateXCsrfToken=async e=>{if(!e){const o=await n({url:"/api/common/csrf/update",ignoreInterceptor:["csrf"]}).catch((()=>({})));if(!o.updateCs)return!1;e=o.updateCs}return n.defaults.headers.common["x-csrf-token"]=e,gbCommonInfo.csrf_token=e,e},n.interceptors.request.use(i.zV),n.interceptors.request.use(i.S4),n.interceptors.request.use(i.Qo.hold),n.interceptors.request.use(i.IT.startRootSpan),n.interceptors.request.use(i.NI),n.interceptors.request.use(i.D7),n.interceptors.request.use(a.iy),n.interceptors.response.use(i.X2.success,i.X2.error),n.interceptors.response.use(i.Gm),n.interceptors.response.use(i.Qo.replay(n)),n.interceptors.response.use((0,i.Qm)(n)),n.interceptors.response.use(i.t0),n.interceptors.response.use(i.Zw),n.interceptors.response.use(i.IT.success,i.IT.error),n.interceptors.response.use(i.ug),n.interceptors.response.use((e=>(r.A.httpIntercept(e.headers),e))),n.interceptors.response.use((e=>{var n,o;return null!==(n=e.config.schttp)&&void 0!==n&&n.getResponse||null!==(o=e.config)&&void 0!==o&&o.__fromBSLibs__?e:e.data}),(e=>{var n,o;throw null!==(n=e.config)&&void 0!==n&&null!==(o=n.schttp)&&void 0!==o&&o.getResponse||!e.request?e:e.request})),window.schttp=n,n})();function l(){u({url:"/api/config/sampleControlConfig/get",method:"post"}).then((({code:e,info:n})=>{0===Number(e)&&(0,s.setLocalStorage)({key:"sky_eye_sample_control_config",value:n.skyEyeConfig||{},expire:36e5})}))}n.A=u},895117:function(e,n,o){o.d(n,{o0:function(){return w},zV:function(){return v},X2:function(){return T},S4:function(){return C},Gm:function(){return b},Qm:function(){return R},Zw:function(){return E},NI:function(){return I},D7:function(){return D},t0:function(){return k},ug:function(){return q},Qo:function(){return U},IT:function(){return P}});var t=o(794103),r=o(353583),i=o(542520);const s={5501:"10011000",5502:"10011001",5503:"10011002",5510:"10011003",5511:"10011004",5512:"10011005",5520:"10011006"};var a=o(558532),u=o(98544),l=o.n(u),d=o(833045),c=o(592524),f=o(561748),p=o(119362),m=o(797283),g=o(665640);const _=["GET","HEAD","OPTIONS"];async function v(e){var n,o;if("on"===(null===(n=gbCommonInfo)||void 0===n?void 0:n.SHOULD_RENDER_CSRF_TOKEN_ON_SSR))return e;if(((null==e?void 0:e.ignoreInterceptor)||[]).indexOf("csrf")>-1)return e;if("undefined"==typeof window)return e;const t=e.method||"GET";if(((null==e?void 0:e.csrfIgnoreMethods)||_).indexOf(t.toUpperCase())>-1)return e;if(null!=e&&null!==(o=e.headers)&&void 0!==o&&o.common["x-csrf-token"])return e;const r=(0,m.I)();return r&&(await r,e.headers.common["x-csrf-token"]=gbCommonInfo.csrf_token||""),e}function h(e,n={}){var o;"undefined"!=typeof window&&(null===(o=window.TPM)||void 0===o||o.run({marketing:"ClientAnalytics",method:"_defineTrack",params:{data:e,options:n}}))}function w(e){const n=function(e){if("undefined"==typeof window||!window.AntiIn)return"";if(!gbCommonInfo.SYNC_ANTIIN_URLS.some((n=>e.includes(n))))return"";const n=window.AntiIn;return n._last?n._last:(n._calculating=n.syncGetAllEncrypted(n.Channel.PC),n._last=n._calculating,setTimeout((()=>n._last=void 0),200),n._calculating)}(e.url)||"",o={};return n&&(o["Anti-In"]=n),e.headers=Object.assign(o,e.headers),e}async function I(e){const n=await async function(e){if("undefined"==typeof window||!window.AntiIn)return"";if(!gbCommonInfo.ANTIIN_URLS.some((n=>e.includes(n))))return"";const n=window.AntiIn;return n._last?n._last:(n._calculating||(n._calculating=n.getAllEncrypted(n.Channel.PC).then((e=>(n._calculating=null,setTimeout((()=>n._last=void 0),200),n._last=e))).catch((()=>""))),await n._calculating)}(e.url)||"",o={};return n&&(o["Anti-In"]=n),e.headers=Object.assign(o,e.headers),e}let y=!0;async function C(e){var n,o;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;e.customdata||(e.customdata={});let t=l().getUri(e);if(t.startsWith("http")){if(!t.startsWith(location.origin))return e;t=t.replace(location.origin,"")}let r="";const i=Date.now();if(e.customdata.requestStartTime=i,e.customdata.subUrl=null===(n=t.split("?"))||void 0===n?void 0:n[0],e.customdata.sigUrl=t,null===(o=gbCommonInfo)||void 0===o||!o.OPEN_SIGNATURE)return e;try{r=await window._SHEIN_CALC_SIGNATURE_(t);let e="signature_compute_time";y&&(y=!1,e="signature_compute_time_first"),h({data:[{key_path:e,values:{num:100*(Date.now()-i)}}]},{random:.05})}catch(e){var s,a,u;"undefined"!=typeof window&&"undefined"!=typeof gbCommonInfo&&window.ErrorJs.sendError("error",`${null===(s=gbCommonInfo)||void 0===s||null===(a=s.REPORT_URL)||void 0===a?void 0:a.SA_REPORT_URL}/unusual`,{errorMark:"signature_compute_error",errorInfo:{stack:null==e?void 0:e.stack,message:null==e?void 0:e.message,sigFileName:null===(u=gbCommonInfo)||void 0===u?void 0:u.SIG_FILE_NAME,sigUrl:t}})}return e.headers["x-gw-auth"]=r,e}function b(e){var n,o;const t=Number(null==e||null===(n=e.data)||void 0===n?void 0:n.code),r=Number(null==e||null===(o=e.data)||void 0===o?void 0:o.sub_code);return 836e3===t&&5501===r&&location.reload(),e}let S=!1;function E(e){var n;return[/\/api\/user\/wishlist(?!\/((check\/good)|(group\/optional\/goods\/get)|(redpoint\/get)))/].some((n=>n.test(e.config.url)))&&void 0!==(null===(n=e.data)||void 0===n?void 0:n.code)&&(-4!=+e.data.code&&-2!=+e.data.code||(S||(S=!0,(0,i.L)({message:gbCommonInfo.language.SHEIN_KEY_PC_17753,type:"none",offset:186,onClose:()=>S=!1})),e.data.code=-1,e.data.originCode=-4)),e}function R(e){return function(n){var o,t,r;const i=(null===(o=n.data)||void 0===o?void 0:o.code)||"";return null!==(t=n.config)&&void 0!==t&&null!==(r=t.schttp)&&void 0!==r&&r.asyncCheckLogin&&["00101110","300206"].includes(""+i)&&e({method:"POST",url:"/api/user/auth/logout"}),n}}function k(e){var n;if(null!==(n=e.config.schttp)&&void 0!==n&&n.needLogin&&e.data&&(300206==+e.data.code||"need login"===e.data.msg||"00101110"==e.data.code)){try{Promise.all([o.e(89740),o.e(48209),o.e(39667)]).then(o.bind(o,839667)).then((({removeAuthUserInfo:e})=>{e()})).catch((e=>{g.log("forceLogin:"+e)}))}catch(e){g.log(e+"")}location.href=gbCommonInfo.langPath+"/user/logout"}return e}const T={success:function(e){var n,o,t,i,a,u,l,d,c,m;if(null!=e&&null!==(n=e.config)&&void 0!==n&&null!==(o=n.schttp)&&void 0!==o&&o.apiLogSkip)return e;if((null==e||null===(t=e.config)||void 0===t||null===(i=t.customdata)||void 0===i?void 0:i.requestStartTime)>0){var _,v,w,I,y;const n=Date.now()-((null==e||null===(_=e.config)||void 0===_||null===(v=_.customdata)||void 0===v?void 0:v.requestStartTime)||0),o=(null==e||null===(w=e.config)||void 0===w?void 0:w.url)||"other";(0,p.F)(o,{responseTime:n}),h({resource:(null==e||null===(I=e.config)||void 0===I||null===(y=I.customdata)||void 0===y?void 0:y.subUrl)||"other",data:[{key_path:"request_time",values:{num:n}}]},{random:.05})}try{var C,b,S,E,R,k,T;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;let n=navigator.userAgent;const{USER_AGENT_BLACK_LIST:o=[],langPath:t=""}=gbCommonInfo;if(o.some((e=>n.includes(e))))return e;const r=null!=e&&null!==(C=e.config)&&void 0!==C&&C.useBffApi?"bff_api_res_code_error":"api_res_code_error",i=(null==e||null===(b=e.config.customdata)||void 0===b?void 0:b.subUrl)||"other";var N,A;null!=(null===(S=e.data)||void 0===S?void 0:S.code)&&"0"!=e.data.code&&836100!=e.data.code&&f.JY.metricCount({metric_name:r,tags:{siteuid:null===(N=gbCommonInfo)||void 0===N?void 0:N.SiteUID,errorCode:e.data.code,apiUrl:i.substring(t.length),hostname:location.hostname},message:(null===(A=e.data)||void 0===A?void 0:A.msg)||`${i}请求非0错误`},{immediate:!0});const s=null==e||null===(E=e.headers)||void 0===E||null===(R=E["site-uid"])||void 0===R?void 0:R.trim();if(!s||null===(k=gbCommonInfo)||void 0===k||!k.SiteUID)return e;var U,P,q;s!==(null===(T=gbCommonInfo)||void 0===T?void 0:T.SiteUID)&&f.JY.metricCount({metric_name:"bff_site_error",tags:{siteuid:null===(U=gbCommonInfo)||void 0===U?void 0:U.SiteUID,bffSiteuid:s||"other",apiUrl:(null===(P=e.config)||void 0===P||null===(q=P.customdata)||void 0===q?void 0:q.subUrl)||"other",hostname:location.hostname},message:"bff返回站点与当前请求站点不一致"},{immediate:!0})}catch(e){g.error(e)}try{r.A.sendReportForScHttp(e),1==(836e3===Number(null==e||null===(a=e.data)||void 0===a?void 0:a.code))&&h({resource:(null==e||null===(u=e.config)||void 0===u||null===(l=u.customdata)||void 0===l?void 0:l.subUrl)||"other",data:[{key_path:"request_error_signature",values:{status_code:String(s[Number(null==e||null===(d=e.data)||void 0===d?void 0:d.sub_code)]||0),info:{message:null==e||null===(c=e.config)||void 0===c||null===(m=c.customdata)||void 0===m?void 0:m.sigUrl}}}]},{immediate:!0})}catch(e){g.log(e)}try{var D,L;const n=null==e||null===(D=e.data)||void 0===D?void 0:D.code,o=null==e||null===(L=e.headers)||void 0===L?void 0:L["risk-id"];if(836100==n&&o){var x,O,H,V,M,G,F,Q,X;const n={page_name:"page_risk_crawler_block",page_id:6407};null===(x=window)||void 0===x||x.sa("set","setPageData",n);const t=(null===(O=window)||void 0===O||null===(H=O.AntiIn)||void 0===H?void 0:H.syncGetAllEncrypted(null===(V=window)||void 0===V?void 0:V.AntiIn.Channel.PC))||null,r=encodeURIComponent(null==e||null===(M=e.request)||void 0===M?void 0:M.responseURL),i=(null===(G=window)||void 0===G?void 0:G.__ArmorToken)||(null===(F=window)||void 0===F?void 0:F.sessionStorage.getItem("armorToken"))||(null===(Q=window)||void 0===Q?void 0:Q.localStorage.getItem("armorToken"))||null;null===(X=window)||void 0===X||X.sa("send",{activity_name:"expose_risk_envinfo",activity_param:{origin_risk_id:o,anti_in:t,armortoken:i,risk_url:r,response:null==e?void 0:e.data}})}}catch(e){g.log(e)}return e},error:function(e){if(void 0!==(null==e?void 0:e.request)){var n,o,t;r.A.sendReportForScHttp(e),h({resource:(null==e||null===(n=e.config)||void 0===n||null===(o=n.customdata)||void 0===o?void 0:o.subUrl)||"other",data:[{key_path:"request_error",values:{status_code:`10010${null==e||null===(t=e.request)||void 0===t?void 0:t.status}`}}]},{immediate:!0});try{var i,s,a,u;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)throw e;const n=navigator.userAgent,{USER_AGENT_BLACK_LIST:o=[],langPath:t=""}=gbCommonInfo;if(o.some((e=>n.includes(e))))throw e;const r=(null==e||null===(i=e.response)||void 0===i?void 0:i.status)||0;if(+r<1)throw e;const l=null!=e&&null!==(s=e.config)&&void 0!==s&&s.useBffApi?"bff_api_request_status_error":"api_request_status_error",d=(null==e||null===(a=e.config.customdata)||void 0===a?void 0:a.subUrl)||"other";f.JY.metricCount({metric_name:l,tags:{siteuid:null===(u=gbCommonInfo)||void 0===u?void 0:u.SiteUID,apiUrl:d.substring(t.length),errorCode:r,hostname:location.hostname},message:null==e?void 0:e.message},{immediate:!0})}catch(e){g.error(e)}}try{var l,d,c;const n=null==e||null===(l=e.response)||void 0===l?void 0:l.status,o=null==e||null===(d=e.response)||void 0===d||null===(c=d.headers)||void 0===c?void 0:c["risk-id"];if(403==n&&o){var p,m,_,v,w,I,y,C,b,S;const n={page_name:"page_risk_crawler_block",page_id:6407};null===(p=window)||void 0===p||p.sa("set","setPageData",n);const t=(null===(m=window)||void 0===m||null===(_=m.AntiIn)||void 0===_?void 0:_.syncGetAllEncrypted(null===(v=window)||void 0===v?void 0:v.AntiIn.Channel.PC))||null,r=encodeURIComponent(null==e||null===(w=e.request)||void 0===w?void 0:w.responseURL),i=(null===(I=window)||void 0===I?void 0:I.__ArmorToken)||(null===(y=window)||void 0===y?void 0:y.sessionStorage.getItem("armorToken"))||(null===(C=window)||void 0===C?void 0:C.localStorage.getItem("armorToken"))||null;null===(b=window)||void 0===b||b.sa("send",{activity_name:"expose_risk_envinfo",activity_param:{origin_risk_id:o,anti_in:t,armortoken:i,risk_url:r,response:null==e||null===(S=e.response)||void 0===S?void 0:S.data}})}}catch(e){g.log(e)}throw e}},N={name:"rewriteSignature",active:()=>gbCommonInfo.OPEN_SIGNATURE&&("gray"===gbCommonInfo.NODE_SERVER_ENV||"production"===gbCommonInfo.NODE_SERVER_ENV),range:()=>!0,check:({data:e})=>836e3==(null==e?void 0:e.code)&&5511==(null==e?void 0:e.sub_code),fix:()=>window._SHEIN_SYNC_TIMESTAMP_(gbCommonInfo.langPath+"/_openapi_gateway_/timestamp")},A={name:"geetest",active:()=>!0,range:({url:e})=>[/\/cart\/update/,/\/cart\/add_mall/,/\/api\/comment\/abcCommentImages\/query/,/\/api\/comment\/abcCommentInfo\/query/,/\/goods_detail_nsw\/getCommentByAbc/,/\/goods_detail_nsw\/getCommentInfoByAbc/].some((n=>n.test(e))),check:({data:e})=>{var n;return 836100==(null==e?void 0:e.code)&&(null==e?void 0:e.sub_code)&&(null==e||null===(n=e.attachment)||void 0===n?void 0:n.cookie_duration)},fix:({data:e})=>(0,a.lt)(e.sub_code,e.attachment.cookie_duration).then((e=>{if("success"!==e.status)throw"geetest_close"!==e.status&&(0,i.L)({type:"error",message:gbCommonInfo.language.SHEIN_KEY_PC_16509}),e}))},U=new class{constructor(e){(0,t.A)(this,"replayQueue",{}),(0,t.A)(this,"plugins",[]),(0,t.A)(this,"_seed",9999),"undefined"!=typeof window&&"undefined"!=typeof gbCommonInfo&&(e.forEach((({name:e,active:n,range:o,check:t,fix:r})=>{"string"==typeof e&&"function"==typeof n&&"function"==typeof o&&"function"==typeof t&&"function"==typeof r&&n()&&this.plugins.push({pluginName:e,range:o,check:t,fix:r,groupId:0})})),this.interceptor={hold:this._hold.bind(this),replay:e=>n=>this._replay(n,e)})}async _hold(e){return e.customdata||(e.customdata={}),e.customdata.groupId={},await Promise.all(this.plugins.map((async n=>{n.range(e)&&await n.holdingPromise,e.customdata.groupId[n.pluginName]=n.groupId}))),e}async _replay(e,n){var o,t;const r=null===(o=e.config)||void 0===o||null===(t=o.customdata)||void 0===t?void 0:t.groupId;if(!r)return e;const i=e.config.headers["x-gw-replay"];if(i)throw this.replayQueue[i](e),delete this.replayQueue[i],new Error("abandon from replay");let s=!0,a=!1;if(await Promise.all(this.plugins.map((async n=>{n.check(e)&&(s=!1,await this._doFix(e,r,n)||(a=!0))}))),s||a)return e;const u=this._createUniqueId(),l=this._saveQueue(u);return n(this._resetConfig(u,e.config)).catch((e=>g.log("replay success: ","abandon from replay"===e.message))),l}async _doFix(e,n,o){return n[o.pluginName]!==o.groupId||o.holdingPromise?o.holdingPromise:o.holdingPromise=(async()=>{let n=!0;try{await o.fix(e)}catch(e){g.error(e),n=!1}return o.groupId++,delete o.holdingPromise,n})()}_createUniqueId(){return this._seed<1e3&&(this._seed=9999),this._seed--}_saveQueue(e){let n=null;const o=new Promise((e=>n=e));return this.replayQueue[e]=n,o}_resetConfig(e,n){return n.headers["x-gw-replay"]=e,delete n.headers["x-gw-auth"],delete n.headers["x-csrf-token"],n}}([N,A]).interceptor,P={_getRandomString(e,n="0123456789"){let o="";for(let t=e;t>0;--t)o+=n[Math.floor(Math.random()*n.length)];return o},_getRootSpanInfo(){const{_getRandomString:e}=P,n=`ff${e(14,"0123456789abcdef")}`.toString();return{traceID:n,spanID:n}},_sampleControlConfig:null,_getSampleRate(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return 0;if(["localhost","debug","gray"].includes(gbCommonInfo.NODE_SERVER_ENV))return 1;let n=null;if(P._sampleControlConfig){const{value:e,end:o}=P._sampleControlConfig;n=e,Date.now()>o&&(P._sampleControlConfig=null)}else{const e=(0,d.getLocalStorage)("sky_eye_sample_control_config");e&&(n=e,P._sampleControlConfig={value:e,end:Date.now()+18e5})}if(n){var o;const t=null===(o=n.apiMap)||void 0===o?void 0:o[e.url];return t?Number(t.prop):Number(n.prop)||.001}return"/api/config/sampleControlConfig/get"!==e.url&&(0,c.u)(),.001},_getSampleFlag(e){const{_getSampleRate:n}=P;return Math.random()<n(e)?1:0},startRootSpan(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;const{_getRootSpanInfo:n,_getSampleFlag:o}=P,{traceID:t}=n(),r=o(e);return e.headers["uber-trace-id"]=`${t}:${t}:0:${r}`,e},_buildTraceSpanData(e,n){var o,t,r,i,s;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo||!e||!n)return null;const{headers:a={},customdata:u={},method:l,url:d=""}=e,c=(null==a?void 0:a["uber-trace-id"])||"",[f="",,,p]=(null==c||null===(o=c.split)||void 0===o?void 0:o.call(c,":"))||[];if("1"!==p)return null;const m=null==u?void 0:u.requestStartTime,g=Date.now()-(m||0),{page_name:_}=window.getSaPageInfo||window.SaPageInfo||{},v=`${P._getSampleRate(e)}`,h="1"===v?"cons":"probabilistic",{headers:w}=n,I=(null==w?void 0:w["x-tracer-name"])||(null==d||null===(t=d.split)||void 0===t||null===(r=t.call(d,"?"))||void 0===r?void 0:r[0])||"/",{IS_RW:y,SERVER_TYPE:C="",NODE_SERVER_ENV:b=""}=gbCommonInfo,S=`${y?"romwe":"shein"}-PC-${C}-${b}`;return{traceID:f,spanID:f,parentID:"",startTime:m,duration:g,operationName:I,api:I,url:d||"",method:(null===(i=(s=l||"").toUpperCase)||void 0===i?void 0:i.call(s))||"",statusCode:n.status||504,ID:"fdf304b4-9e52-56e1-b9be-159baeafb0b9",host:S,page:_,authName:"",samplerType:h,samplerParam:v,spanKind:"client"}},success(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;const{headers:n,config:o}=e||{};if(!n||!o)return e;if(null!=n&&n["x-recognize-cache"])return e;const t=P._buildTraceSpanData(o,e);return t?(h({data:[{key_path:"trace-span",values:{span_info:JSON.stringify(t)}}]},{random:1}),e):e},error(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)throw e;const{config:n,response:o}=e||{};if(!n)throw e;const{headers:t}=o||{};if(null!=t&&t["x-recognize-cache"])throw e;const r=P._buildTraceSpanData(n,o);if(!r)throw e;throw h({data:[{key_path:"trace-span",values:{span_info:JSON.stringify(r)}}]},{random:1}),e}};function q(e){if("undefined"!=typeof window){const n=e.headers,o=n["Client-Ipver"]||n["client-ipver"]||(null!=n&&n.get?null==n?void 0:n.get("Client-Ipver"):"")||"",t=n["Client-Ipaddr"]||n["client-ipaddr"]||(null!=n&&n.get?null==n?void 0:n.get("Client-Ipaddr"):"")||"";o&&(window.__CLIENT_IPVER__=o),t&&(window.__CLIENT_IPADDR__=t)}return e}function D(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;if(e.useBffApi){const{langPath:n="",WEB_VERSION:o}=gbCommonInfo;if(e.baseURL=`${n}/bff-api`,e.headers.webVersion=o,["debug","localhost","gray"].includes(gbCommonInfo.NODE_SERVER_ENV)){const{bffEnv:n}=gbCommonInfo;e.headers["bff-env"]=n,e.headers.sheindebug="676"}}return e}},797283:function(e,n,o){o.d(n,{I:function(){return d}});var t=o(592524),r=o(561748);let i,s=Number(gbCommonInfo.CSRFTOEKN_MAX_RETRIES);Number.isNaN(s)&&(s=0);let a=500;"undefined"!=typeof window&&window.localStorage.getItem("csrfToken_delay")&&(a=Number(window.localStorage.getItem("csrfToken_delay")));let u=s;async function l(e){const n=async()=>{if(u>0)return await(n=a,new Promise((e=>setTimeout(e,n)))),u--,l(e);var n};try{return await Promise.race([e(),new Promise(((e,n)=>setTimeout((()=>n(new Error("Timeout"))),6e3)))])||n()}catch(e){return n()}}function d(){return i||("undefined"!=typeof window&&(i=l((()=>t.A.updateXCsrfToken())).catch((e=>{var n;r.Vc.logInfo({tag:"SHEIN_PC_COMMON_CSRF_TOKEN",message:"update_csrf_token_error",params:{scene:null===(n=gbCommonInfo)||void 0===n?void 0:n.templateType,retries:u,msgData:e}})})).finally((()=>{i=void 0}))),i||Promise.resolve())}},572789:function(e,n,o){var t=o(98544),r=o.n(t),i=o(665640);const s=[],a=[];function u(e){try{s.forEach((n=>e.interceptors.request.use(...n))),a.forEach((n=>e.interceptors.response.use(...n)))}catch(e){i.error("assignInterceptors error",e)}return e}"undefined"!=typeof window&&(r()._create=r().create,r().create=function(e){return u(r()._create(e))},u(r())),n.A=r()},482883:function(e,n,o){o.d(n,{A:function(){return C}});var t=o(572789),r=o(547436),i=o.n(r),s=o(993397),a=o.n(s),u=o(512656),l=o.n(u),d=o(35666),c=o.n(d),f=o(933125),p=o.n(f),m=o(880083),g=o.n(m),_=o(989681),v=o.n(_);function h(e,n){return e.data=c().call(n,e.data,e.headers,n.transformResponse),e}function w(e,n,o,t,r,s=!1){const a=[...e];for(;a.length;){const{fulfilled:e,rejected:u}=a[n](),l=s?u:e;if(l){try{r=l===h?l(r,o):l(r),s=!1}catch(e){r=e,s=!0}if("[object Promise]"===Object.prototype.toString.call(r)){r=new(i())("Promise is unsupported in synchronizeInstance","INTERCEPTOR_ILLEGAL",o,t,r),s=!0;break}}}return{payload:r,inCatch:s}}function I(e,n,o,t,r){const{success:i,error:s,complete:a}=n;if("function"==typeof i||"function"==typeof s){const{payload:a,inCatch:u}=w(e.interceptors.response.handlers,"shift",n,o,t,r);u?"function"==typeof s&&s(a):"function"==typeof i&&i(a)}"function"==typeof a&&a(o)}var y=o(895117),C=(()=>{if("undefined"==typeof window)return t.A;const e=function(e){return e.defaults.adapter=function(e){return async function(n){try{(n=>{const{payload:o,inCatch:t}=w(e.interceptors.request.handlers,"pop",n,null,n);if(t)return void I(e,n,null,o,!0);const r=(n=o).headers,s=n.responseType;let u=n.data;a().isFormData(u)&&a().isStandardBrowserEnv()&&delete r["Content-Type"];let d=new XMLHttpRequest;const c=l()(n.baseURL,n.url);d.open(n.method.toUpperCase(),p()(c,n.params,n.paramsSerializer),!1),"setRequestHeader"in d&&a().forEach(r,(function(e,n){void 0===u&&"content-type"===n.toLowerCase()?delete r[n]:d.setRequestHeader(n,e)})),a().isUndefined(n.withCredentials)||(d.withCredentials=!!n.withCredentials),s&&"json"!==s&&(d.responseType=n.responseType),u||(u=null);const f=v()(c);f&&-1===["http","https","file"].indexOf(f)?I(e,n,d,new(i())("Unsupported protocol "+f+":",i().ERR_BAD_REQUEST,n),!0):(d.send(u),function(){if(!d||4!==d.readyState)return;if(0===d.status&&(!d.responseURL||0!==d.responseURL.indexOf("file:")))return;const o="getAllResponseHeaders"in d?g()(d.getAllResponseHeaders()):null,t={data:s&&"text"!==s&&"json"!==s?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:o,config:n,request:d};d.status>=200&&d.status<300||304===d.status?I(e,n,d,t):I(e,n,d,new(i())("Network Error",i().ERR_NETWORK,n,d,t),!0),d=null}())})(n)}catch(e){return{code:"-1",msg:"Unexpected Error in SyncXhrAdapter",error:e}}return{code:"0",msg:"SyncXhrAdapter Work Expectant"}}}(e),e.interceptors.request.forEach=e.interceptors.response.forEach=function(){},e.interceptors.response.handlers.unshift({fulfilled:h}),e}(t.A.create({baseURL:gbCommonInfo.langPath,headers:{common:{"x-requested-with":"XMLHttpRequest"}},params:{_ver:"1.1.8",_lang:gbCommonInfo.appLanguage}}));return e.interceptors.request.use((e=>(e.headers["x-csrf-token"]=gbCommonInfo.csrf_token,e))),e.interceptors.request.use(y.o0),e.interceptors.request.use(y.D7),e.interceptors.response.use((0,y.Qm)(e)),e.interceptors.response.use(y.t0),e.interceptors.response.use(y.X2.success,y.X2.error),e.interceptors.response.use((e=>{var n;return null!==(n=e.config.schttp)&&void 0!==n&&n.getResponse?e:e.data}),(e=>{var n,o;throw null!==(n=e.config)&&void 0!==n&&null!==(o=n.schttp)&&void 0!==o&&o.getResponse||!e.request?e:e.request})),window.schttpSync=e,e})()},943151:function(e,n,o){o.d(n,{f:function(){return i}});var t=o(592524),r=o(482883);function i({isAsync:e,opt:n,successCb:o,errorCb:i,completeCb:s}){e?(0,t.A)({...n}).then((e=>{o&&o(e)})).catch((e=>{i&&i(e)})).finally((e=>{s&&s(e)})):(0,r.A)({...n,success:e=>{o&&o(e)},error:e=>{i&&i(e)},complete:e=>{s&&s(e)}})}}}]);
//# sourceMappingURL=schttp-chunk-2de95fb8ad6f4dc1.js.map